/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e={7279:(t,e,i)=>{i.r(e)},9215:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AStar=void 0;class i{static diagonalSuccessors({$N:t,$S:e,$E:i,$W:s,N:r,S:o,E:n,W:a,grid:h,result:d,i:l}){return t&&(i&&0===h[r][n]&&(d[l++]={x:n,y:r}),s&&0===h[r][a]&&(d[l++]={x:a,y:r})),e&&(i&&0===h[o][n]&&(d[l++]={x:n,y:o}),s&&0===h[o][a]&&(d[l++]={x:a,y:o})),d}static diagonalSuccessorsFree({$N:t,$S:e,$E:i,$W:s,N:r,S:o,E:n,W:a,grid:h,rows:d,cols:l,result:c,i:u}){return t=r>-1,e=o<d,s=a>-1,n<l&&(t&&0===h[r][n]&&(c[u++]={x:n,y:r}),e&&0===h[o][n]&&(c[u++]={x:n,y:o})),s&&(t&&0===h[r][a]&&(c[u++]={x:a,y:r}),e&&0===h[o][a]&&(c[u++]={x:a,y:o})),c}static nothingToDo({result:t}){return t}static successors({find:t,x:e,y:i,grid:s,rows:r,cols:o}){const n=i-1,a=i+1,h=e+1,d=e-1,l=n>-1&&0===s[n][e],c=a<r&&0===s[a][e],u=h<o&&0===s[i][h],p=d>-1&&0===s[i][d],g=[];let m=0;return l&&(g[m++]={x:e,y:n}),u&&(g[m++]={x:h,y:i}),c&&(g[m++]={x:e,y:a}),p&&(g[m++]={x:d,y:i}),t({$N:l,$S:c,$E:u,$W:p,N:n,S:a,E:h,W:d,grid:s,rows:r,cols:o,result:g,i:m})}static diagonal({start:t,end:e,f1:i,f2:s}){return s(i(t.x-e.x),i(t.y-e.y))}static euclidean({start:t,end:e,f2:i}){const s=t.x-e.x,r=t.y-e.y;return i(s*s+r*r)}static manhattan({start:t,end:e,f1:i}){return i(t.x-e.x)+i(t.y-e.y)}static calc({grid:t,start:e,end:s,f:r}){const o=t[0].length,n=t.length,a=o*n,h=Math.abs;let d=Math.max;const l={},c=[],u=[{x:e.gridX,y:e.gridY,f:0,g:0,v:e.gridX+e.gridY*o}];let p,g,m,w,x,f,y,b,v,T=1;const C={x:s.gridX,y:s.gridY,v:s.gridX+s.gridY*o};switch(r){case"Diagonal":case"DiagonalFree":m=i.diagonalSuccessors,g=i.diagonal;break;case"Euclidean":case"EuclideanFree":d=Math.sqrt,m=i.diagonalSuccessors,g=i.euclidean;break;default:d=Math.sqrt,g=i.manhattan,m=i.nothingToDo}null!=m||(m=i.diagonalSuccessorsFree);do{for(f=a,y=0,w=0;w<T;++w){const t=u[w].f;t<f&&(f=t,y=w)}if(b=u.splice(y,1)[0],b.v!==C.v)for(--T,v=i.successors({find:m,x:b.x,y:b.y,grid:t,rows:n,cols:o}),w=0,x=v.length;w<x;++w)p={x:v[w].x,y:v[w].y,f:0,g:0,v:v[w].x+v[w].y*o,p:b},p.v in l||(p.f=(p.g=b.g+g({start:p,end:b,f1:h,f2:d}))+g({start:p,end:C,f1:h,f2:d}),u[T++]=p,l[p.v]=1);else{w=T=0;do{c[w++]={x:b.x,y:b.y}}while(null!=(b=b.p));c.reverse()}}while(T>0);return c}}e.AStar=i},9483:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;const s=i(8687);class r extends s.Container{constructor(t){var e,i,s,r,o,n,a,h,d,l,c,u,p,g,m,w;super(),this.eventMode="static",this.cursor="pointer",this.onClick=t.onClick,this.paddingTop=null!==(e=t.paddingTop)&&void 0!==e?e:20,this.paddingRight=null!==(i=t.paddingRight)&&void 0!==i?i:20,this.paddingBottom=null!==(s=t.paddingBottom)&&void 0!==s?s:20,this.paddingLeft=null!==(r=t.paddingLeft)&&void 0!==r?r:20,this.fontSize=null!==(o=t.fontSize)&&void 0!==o?o:16,this.textColor=null!==(n=t.textColor)&&void 0!==n?n:0,this.textColorHover=null!==(a=t.textColorHover)&&void 0!==a?a:0,this.shadowTextColor=null!==(h=t.shadowTextColor)&&void 0!==h?h:0,this.shadowThickness=null!==(d=t.shadowThickness)&&void 0!==d?d:0,this.iconColor=null!==(l=t.iconColor)&&void 0!==l?l:0,this.iconColorHover=null!==(c=t.iconColorHover)&&void 0!==c?c:0,this.buttonIdleColor=null!==(u=t.buttonIdleColor)&&void 0!==u?u:0,this.buttonIdleAlpha=null!==(p=t.buttonIdleAlpha)&&void 0!==p?p:1,this.buttonHoverColor=null!==(m=null!==(g=t.buttonHoverColor)&&void 0!==g?g:t.buttonIdleColor)&&void 0!==m?m:0,this.buttonHoverAlpha=null!==(w=t.buttonHoverAlpha)&&void 0!==w?w:1,this.setup(t),null!=t.btnWidth&&null!=t.btnHeight?this.draw({btnWidth:t.btnWidth,btnHeight:t.btnHeight,btnRadius:t.btnRadius}):this.draw({btnWidth:this.text.width,btnHeight:this.text.height,btnRadius:t.btnRadius}),this.idleColor(),"number"==typeof t.initX&&(this.position.x=t.initX),"number"==typeof t.initY&&(this.position.y=t.initY)}setup({text:t,btnWidth:e,btnHeight:i,iconTexture:r,iconScale:o=1}){const n=new s.Graphics;this.addChild(n),this.background=n;const{paddingLeft:a,paddingTop:h}=this,d=new s.Sprite(r);d.scale.set(o),d.position.set(a,h),this.addChild(d),this.icon=d;const l=new s.Text(t,{fontFamily:"'Courier New', Courier, monospace",fontSize:this.fontSize,fill:16777215,align:"center",stroke:this.shadowTextColor,strokeThickness:this.shadowThickness});null!=e&&null!=i&&(null!=r?l.position.set(d.x+d.width+a,h):(l.anchor.set(.5,.5),l.position.set(e/2,i/2))),this.addChild(l),this.text=l,this.initEventLesteners()}initEventLesteners(){this.on("pointertap",(t=>{"function"==typeof this.onClick&&this.onClick(this)})),this.on("pointerdown",(t=>{"touch"===t.pointerType&&this.hoverColor()})),this.on("pointerenter",(t=>{"mouse"===t.pointerType&&this.hoverColor()})),this.on("pointerleave",(t=>{"mouse"===t.pointerType&&this.idleColor()})),this.on("pointerup",(t=>{"touch"===t.pointerType&&this.idleColor()}))}draw({btnWidth:t,btnHeight:e,btnRadius:i=0}){this.background.beginFill(16777215),this.background.drawRoundedRect(0,0,t,e,i),this.background.endFill()}color({alpha:t,bgColor:e,txtColor:i,iconColor:s}){this.background.tint=e,this.background.alpha=t,this.text.tint=i,this.icon.tint=s}idleColor({alpha:t=this.buttonIdleAlpha,bgColor:e=this.buttonIdleColor,txtColor:i=this.textColor,iconColor:s=this.iconColor}={}){this.color({alpha:t,bgColor:e,txtColor:i,iconColor:s})}hoverColor({alpha:t=this.buttonHoverAlpha,bgColor:e=this.buttonHoverColor,txtColor:i=this.textColorHover,iconColor:s=this.iconColorHover}={}){this.color({alpha:t,bgColor:e,txtColor:i,iconColor:s})}}e.Button=r},225:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;const s=i(8687);class r extends s.Graphics{constructor(t){super(),this.draw(t),"number"==typeof t.initY&&(this.position.y=t.initY)}draw({viewWidth:t,viewHeight:e}){this.clear(),this.beginFill(16777215),this.drawRect(0,0,t,e),this.endFill()}handleUpdate(t){}handleResize({viewWidth:t,viewHeight:e}){this.draw({viewWidth:t,viewHeight:e})}}r.options={scrollEdge:100},e.Camera=r},2550:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CampaignScene=void 0;const s=i(8687),r=i(3110),o=i(9221),n=i(6865),a=i(4539),h=i(3200),d=i(2273),l=i(3244),c=i(4631),u=i(8554),p=i(4536);class g extends s.Container{constructor(t){super(),this.missionStarted=!1,this.missions=[],this.currentMissionIdx=g.options.startMission,"number"==typeof t.missionIdx&&(this.currentMissionIdx=t.missionIdx),this.setup(t)}setup({viewWidth:t,viewHeight:e}){const i=new o.Game({viewWidth:t,viewHeight:e,team:h.Team.blue,type:"campaign"});this.addChild(i),this.game=i}handleResize(t){this.game.handleResize(t)}handleUpdate(t){if(this.game.handleUpdate(t),this.game.gameEnded)return;const e=this.currentMission;for(let t=0;t<e.triggers.length;t++){const i=e.triggers[t];("timed"===i.type&&this.game.time>=i.time||"conditional"===i.type&&i.condition())&&(i.action(),e.triggers.splice(t,1),t--)}}startCurrentLevel(){this.missionStarted=!0;const t=this.currentMission=Object.assign({},this.missions[this.currentMissionIdx],{triggers:this.missions[this.currentMissionIdx].triggers.slice()});this.game.startGame(t),t.items.forEach((({Constructor:t,initGridX:e,initGridY:i,...s})=>{this.game.tileMap.addItem(new t({game:this.game,initX:this.game.tileMap.gridSize*e,initY:this.game.tileMap.gridSize*i,...s}))})),this.game.cash[h.Team.blue]=t.cash.blue,this.game.cash[h.Team.green]=t.cash.green,this.game.showMessage({character:u.EMessageCharacter.system,message:`Mission: ${t.name}\n${t.briefing}`,playSound:!1})}mountedHandler(){this.prepareMissions(),this.startCurrentLevel()}prepareMissions(){this.missions=[{name:"Rescue",briefing:"In the months since the great war, mankind has fallen into chaos. Billions are dead with cities in ruins.\nSmall groups of survivors band together to try and survive as best as they can.\nWe are trying to reach out to all the survivors in this sector before we join back with the main colony.",mapImageSrc:"level1Background",mapSettingsSrc:"level1Settings",startGridX:36,startGridY:0,cash:{blue:0,green:0},items:[{Constructor:a.Base,initGridX:55,initGridY:6,team:h.Team.blue,life:100},{Constructor:d.HeavyTank,initGridX:57,initGridY:12,direction:n.EVectorDirection.downRight,team:h.Team.blue,uid:-1},{Constructor:c.Transport,initGridX:-3,initGridY:2,direction:n.EVectorDirection.right,team:h.Team.blue,uid:-3,ordersable:!1},{Constructor:c.Transport,initGridX:-3,initGridY:4,direction:n.EVectorDirection.left,team:h.Team.blue,uid:-4,ordersable:!1},{Constructor:l.ScoutTank,initGridX:40,initGridY:20,direction:n.EVectorDirection.up,team:h.Team.green,uid:-2,life:21,orders:{type:"patrol",fromPoint:{gridX:34,gridY:20},toPoint:{gridX:42,gridY:26}}},{Constructor:l.ScoutTank,initGridX:14,initGridY:0,direction:n.EVectorDirection.down,team:h.Team.green,uid:-5,life:21,orders:{type:"patrol",fromPoint:{gridX:14,gridY:0},toPoint:{gridX:14,gridY:14}}}],triggers:[{type:"timed",time:3e3,action:()=>{this.game.showMessage({character:u.EMessageCharacter.op,message:"Commander!! We haven't heard from the last convoy in over two hours. They should have arrived by now."})}},{type:"timed",time:1e4,action:()=>{this.game.showMessage({character:u.EMessageCharacter.op,message:"They were last seen in the North West Sector. Could you investigate?"})}},{type:"conditional",condition:()=>this.game.tileMap.isItemsDead([-1,-3,-4]),action:()=>{this.endMission({success:!1})}},{type:"conditional",condition:()=>this.game.tileMap.isItemsDead(-2),action:()=>{this.game.showMessage({character:u.EMessageCharacter.op,message:"The rebels have been getting very aggressive lately. I hope the convoy is safe. Find them and escort them back to the base."})}},{type:"conditional",condition:()=>{const t=this.game.tileMap.getItemByUid(-1);if(null!=t){const e=t.getGridXY({center:!0});return e.gridX<30&&e.gridY<30}return!1},action:()=>{this.game.showMessage({character:u.EMessageCharacter.driver,message:"Can anyone hear us? Our convoy has been pinned down by rebel tanks. We need help."})}},{type:"conditional",condition:()=>{const t=this.game.tileMap.getItemByUid(-1);if(null!=t){const e=t.getGridXY({center:!0});return e.gridX<10&&e.gridY<10}return!1},action:()=>{const t=this.game.tileMap.getItemByUid(-1);null!=t&&(this.game.showMessage({character:u.EMessageCharacter.driver,message:"Thank you. We thought we would never get out of here alive."}),this.game.processCommand([-3,-4],{type:"guard",to:t}))}},{type:"conditional",condition:()=>{const t=this.game.tileMap.getItemByUid(-3),e=this.game.tileMap.getItemByUid(-4);if(null!=t&&null!=e){const i=t.getGridXY({center:!0}),s=e.getGridXY({center:!0});return i.gridX>52&&i.gridY<18&&s.gridX>52&&s.gridY<18}return!1},action:()=>{this.endMission({success:!0})}}]},{name:"Assault",briefing:"Thanks to the supplies from the convoy, we now have the base up and running.\nThe rebels nearby are proving to be a problem. We need to take them out. \nFirst set up the base defences. Then find and destroy all rebels in the area.\nThe colony will be sending us reinforcements to help us out.",mapImageSrc:"level1Background",mapSettingsSrc:"level1Settings",startGridX:36,startGridY:0,cash:{blue:0,green:0},items:[{Constructor:a.Base,initGridX:55,initGridY:6,team:h.Team.blue,uid:-1},{Constructor:p.GroundTurret,initGridX:53,initGridY:17,direction:n.EVectorDirection.up,team:h.Team.blue},{Constructor:d.HeavyTank,initGridX:55,initGridY:16,direction:n.EVectorDirection.upLeft,team:h.Team.blue,uid:-2,orders:{type:"sentry"}},{Constructor:l.ScoutTank,initGridX:55,initGridY:36,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"hunt"}},{Constructor:l.ScoutTank,initGridX:53,initGridY:36,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"hunt"}},{Constructor:l.ScoutTank,initGridX:5,initGridY:5,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"patrol",fromPoint:{gridX:5,gridY:5},toPoint:{gridX:20,gridY:20}}},{Constructor:l.ScoutTank,initGridX:5,initGridY:15,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"patrol",fromPoint:{gridX:5,gridY:15},toPoint:{gridX:20,gridY:30}}},{Constructor:l.ScoutTank,initGridX:25,initGridY:5,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"patrol",fromPoint:{gridX:25,gridY:5},toPoint:{gridX:25,gridY:20}}},{Constructor:l.ScoutTank,initGridX:35,initGridY:5,direction:n.EVectorDirection.down,team:h.Team.green,orders:{type:"patrol",fromPoint:{gridX:35,gridY:5},toPoint:{gridX:35,gridY:30}}},{Constructor:a.Base,initGridX:5,initGridY:36,team:h.Team.green,uid:-11},{Constructor:p.GroundTurret,initGridX:5,initGridY:28,team:h.Team.green},{Constructor:p.GroundTurret,initGridX:7,initGridY:33,team:h.Team.green},{Constructor:p.GroundTurret,initGridX:8,initGridY:37,team:h.Team.green}],triggers:[{type:"timed",time:8e3,action:()=>{const{tileMap:t}=this.game,e=t.getItemByUid(-2);null!=e&&(this.game.showMessage({character:u.EMessageCharacter.op,message:"Commander!! Reinforcements have arrived from the colony."}),t.addItem(new l.ScoutTank({game:this.game,initX:58*t.gridSize,initY:22*t.gridSize,team:h.Team.blue,orders:{type:"guard",to:e}})),t.addItem(new l.ScoutTank({game:this.game,initX:60*t.gridSize,initY:21*t.gridSize,team:h.Team.blue,orders:{type:"guard",to:e}})))}},{type:"timed",time:25e3,action:()=>{this.game.showMessage({character:u.EMessageCharacter.op,message:"Commander!! We have enough resources for another ground turret.\nSet up the turret to keep the base safe from any more attacks."}),this.game.cash[h.Team.blue]=1500}},{type:"interval",interval:1e3,action:()=>{this.game.cash[h.Team.green]}},{type:"interval",interval:18e4,action:()=>{this.game.showMessage({character:u.EMessageCharacter.op,message:"Commander!! More Reinforcments have arrived."});const{tileMap:t}=this.game;t.addItem(new l.ScoutTank({game:this.game,initX:61*t.gridSize,initY:22*t.gridSize,team:h.Team.blue,orders:{type:"move",toPoint:{gridX:55,gridY:21}}})),t.addItem(new d.HeavyTank({game:this.game,initX:61*t.gridSize,initY:23*t.gridSize,team:h.Team.blue,orders:{type:"move",toPoint:{gridX:56,gridY:23}}}))}},{type:"timed",time:3e5,action:()=>{this.game.showMessage({character:u.EMessageCharacter.pilot,message:"Close Air Support en route. Will try to do what I can."});const{tileMap:t}=this.game;t.addItem(new d.HeavyTank({game:this.game,initX:61*t.gridSize,initY:22*t.gridSize,ordersable:!1,team:h.Team.blue,orders:{type:"hunt"}}))}},{type:"conditional",condition:()=>this.game.tileMap.isItemsDead(-1),action:()=>{this.endMission({success:!1})}},{type:"conditional",condition:()=>this.game.tileMap.isItemsDead(-11),action:()=>{this.endMission({success:!0})}}]}]}endMission({success:t}){const e=this.currentMissionIdx===this.missions.length-1;this.game.endGame({success:t,message:t?e?"Mission Accomplished!\nThis was the last mission in the campaign.\nThank You for playing.":"Mission Accomplished!\nReady for new mission?":"Mission Failed.\nTry again?",view:t?e?"home":"home-next":"home-repeat",onLeftClick:()=>{r.SceneManager.changeScene({name:"menu"}).catch(console.error)},onRightClick:()=>{t&&!e&&this.currentMissionIdx++,this.startCurrentLevel()}})}}g.options={startMission:0},e.CampaignScene=g},9221:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const s=i(8687),r=i(8554),o=i(665),n=i(225),a=i(5473),h=i(3200),d=i(4539),l=i(9498),c=i(2273),u=i(3244),p=i(4631),g=i(7697),m=i(7049),w=i(9420),x=i(3452),f=i(5191),y=i(9288),b=i(8350),v=i(6879),T=i(9060),C=i(3110),S=i(6103),M=i(4536),k=i(6667),A=i(1097);class B extends s.Container{constructor(t){super(),this.gameEnded=!1,this.time=0,this.cash={[h.Team.blue]:0,[h.Team.green]:0},this.speedAdjustmentFactor=1/512,this.turnSpeedAdjustmentFactor=1/64,this.speedAdjustmentWhileTurningFactor=.4,this.reloadAdjustmentFactor=1/8,this.deployBuilding=!1,this.canDeployBuilding=!1,this.selectedItems=[],this.dragSelectThreshold=5,this.dragSelect=new s.Graphics,this.pointerMainDownId=-1,this.pointerMainDownX=-1,this.pointerMainDownY=-1,this.pointerSecondDownId=-1,this.pointerSecondDownX=-1,this.pointerSecondDownY=-1,this.handlePointerTap=t=>{if((0,a.logPointerEvent)("Game pointertap"),this.gameEnded)return;const e=this.tileMap.toLocal(t),i=this.tileMap.itemUnderPointer(e),{previousPointerTapEvent:s}=this;if(null!=s&&null!=i&&(i.type===g.EItemType.vehicles||i.type===g.EItemType.aircraft)){const e="mouse"===s.pointerType&&"mouse"===t.pointerType&&s.pointerId===t.pointerId,r="touch"===s.pointerType&&"touch"===t.pointerType&&s.pointerId+1===t.pointerId;if((e||r)&&t.timeStamp-s.timeStamp<B.options.doubleTapMaxTime&&Math.abs(t.globalX-s.globalX)<10&&Math.abs(t.globalY-s.globalY)<10){(0,a.logPointerEvent)("Game pointerdoubletap"),this.clearSelection();const{moveableItems:t}=this.tileMap;for(let e=0;e<t.length;e++){const s=t[e];i.constructor===s.constructor&&s.team===i.team&&this.selectItem(s,!1)}return}}const r=[];if(null!=i){if(0===this.selectedItems.filter((t=>t.team===this.team)).length||i.team===this.team)t.shiftKey||this.clearSelection(),this.selectItem(i,t.shiftKey);else if(i.type!==g.EItemType.terrain){for(let t=this.selectedItems.length-1;t>=0;t--){const e=this.selectedItems[t];e.team===this.team&&e.ordersable&&e.canAttack&&null!=e.uid&&r.push(e.uid)}r.length>0&&this.processCommand(r,{type:"attack",toUid:i.uid})}}else{for(let t=this.selectedItems.length-1;t>=0;t--){const e=this.selectedItems[t];e.team!==this.team||!e.ordersable||e.type!==g.EItemType.vehicles&&e.type!==g.EItemType.aircraft||null!=e.uid&&r.push(e.uid)}if(r.length>0){const{gridSize:t}=this.tileMap;this.processCommand(r,{type:"move",toPoint:{gridX:e.x/t,gridY:e.y/t}})}}this.previousPointerTapEvent={type:t.type,pointerId:t.pointerId,pointerType:t.pointerType,timeStamp:t.timeStamp,globalX:t.globalX,globalY:t.globalY}},this.handlePointerDown=t=>{if(this.gameEnded)return;const e=this.toLocal(t);this.pointerMainDownId>-1?(this.pointerSecondDownId=t.pointerId,this.pointerSecondDownX=e.x,this.pointerSecondDownY=e.y):(this.pointerMainDownId=t.pointerId,this.pointerMainDownX=e.x,this.pointerMainDownY=e.y),(0,a.logPointerEvent)(`Game pdX=${e.x} pdX=${e.y} down`)},this.handlePointerUp=t=>{if(!this.gameEnded){if(this.pointerSecondDownId=this.pointerSecondDownX=this.pointerSecondDownY=-1,this.pointerMainDownId=this.pointerMainDownX=this.pointerSecondDownY=-1,(0,a.logPointerEvent)("Game pointer up"),0===this.dragSelect.width)this.handlePointerTap(t);else{t.shiftKey||this.clearSelection();const e=this.dragSelect.getBounds(),i=this.tileMap.toLocal({x:e.left,y:e.top}),s=this.tileMap.toLocal({x:e.right,y:e.bottom}),r=i.x,o=s.x,n=i.y,a=s.y,{moveableItems:h}=this.tileMap;h.forEach((t=>{if(!t.selectable||t.isDead())return;const e=t.getSelectionBounds();e.left>=r&&e.right<=o&&e.top>=n&&e.bottom<=a&&this.selectItem(t,!0)}))}this.dragSelect.clear()}},this.handlePointerLeave=t=>{t.pointerId===this.pointerSecondDownId?(this.pointerSecondDownId=this.pointerSecondDownX=this.pointerSecondDownY=-1,(0,a.logPointerEvent)("Game pointer second leave")):(this.pointerMainDownId=this.pointerMainDownX=this.pointerSecondDownY=-1,(0,a.logPointerEvent)("Game pointer main leave")),this.dragSelect.clear()},this.handlePointerMove=t=>{if(this.gameEnded)return;const e=this.toLocal(t),i=t.pointerId===this.pointerMainDownId;if((0,a.logPointerEvent)(`Game pointer ${i?"main":"unknown"} move`),i)-1===this.pointerSecondDownId&&this.pointerMainDownX>-1&&this.pointerMainDownY>-1&&Math.abs(e.x-this.pointerMainDownX)>this.dragSelectThreshold&&Math.abs(e.y-this.pointerMainDownY)>this.dragSelectThreshold&&this.drawDragSelect(e);else if(this.pointerMainDownId>-1&&this.pointerSecondDownId>-1){this.dragSelect.width>0&&this.dragSelect.clear();const t=i?this.pointerSecondDownX:this.pointerMainDownX,s=i?this.pointerSecondDownY:this.pointerMainDownY,r=i?this.pointerMainDownX:this.pointerSecondDownX,o=i?this.pointerMainDownY:this.pointerSecondDownY,n=e.x,a=e.y,h=Math.hypot(s-o,t-r),d=Math.hypot(s-a,t-n)/h*B.options.pinchScaleFactor,l=Math.min(t,n)+.5*(t-n),c=Math.min(s,a)+.5*(s-a),u=this.toGlobal({x:l,y:c}),p=this.tileMap.toLocal(u);this.tileMap.zoom({scaleFactor:d<1?1/d*-1:d,sX:p.x,sY:p.y}),this.handleResize({viewWidth:C.SceneManager.width,viewHeight:C.SceneManager.height}),i?(this.pointerMainDownX=e.x,this.pointerMainDownY=e.y):(this.pointerSecondDownX=e.x,this.pointerSecondDownY=e.y)}},this.handleWheel=t=>{const e=this.tileMap.toLocal(t),i=-1*Math.sign(t.deltaY)*B.options.wheelScaleFactor;this.tileMap.zoom({scaleFactor:i,sX:e.x,sY:e.y}),this.handleResize({viewWidth:C.SceneManager.width,viewHeight:C.SceneManager.height})},this.startGame=({mapImageSrc:t,mapSettingsSrc:e,startGridX:i=0,startGridY:s=0})=>{this.gameEnded=!1,this.time=0,this.runLevel({mapImageSrc:t,mapSettingsSrc:e});const{gridSize:r}=this.tileMap;this.topBar.miniMap.assignBackgroundTexture({texture:this.tileMap.background.texture}),this.tileMap.goTo({x:i*r,y:s*r}),this.handleResize({viewWidth:C.SceneManager.width,viewHeight:C.SceneManager.height})},this.viewWidth=t.viewWidth,this.viewHeight=t.viewHeight,this.type=t.type,this.team=t.team,this.setup(t),this.prepareTextures(),this.addEventLesteners()}setup({viewWidth:t,viewHeight:e}){const i=e-S.TopBar.options.initHeight;this.camera=new n.Camera({viewWidth:t,viewHeight:i,initY:S.TopBar.options.initHeight}),this.addChild(this.camera),this.tileMap=new o.TileMap({game:this,initY:S.TopBar.options.initHeight}),this.addChild(this.tileMap),this.tileMap.mask=this.camera,this.addChild(this.dragSelect),this.topBar=new S.TopBar({game:this}),this.addChild(this.topBar),this.startModal=new v.StartModal({viewWidth:t,viewHeight:e}),this.startModal.hideModal(),this.addChild(this.startModal)}addEventLesteners(){this.tileMap.eventMode="static",this.tileMap.on("pointerdown",this.handlePointerDown),this.tileMap.on("pointerup",this.handlePointerUp),this.tileMap.on("pointermove",this.handlePointerMove),this.tileMap.on("pointerleave",this.handlePointerLeave),this.tileMap.on("wheel",this.handleWheel)}drawDragSelect(t){this.dragSelect.clear();const e=Math.abs(t.x-this.pointerMainDownX),i=Math.abs(t.y-this.pointerMainDownY);if(e>0&&i>0){this.dragSelect.lineStyle({width:1,color:16776960});const s=Math.min(t.x,this.pointerMainDownX),r=Math.min(t.y,this.pointerMainDownY);this.dragSelect.position.set(s,r),this.dragSelect.drawRect(0,0,e,i),this.dragSelect.endFill()}}isItemSelected(t){return this.selectedItems.includes(t)}selectItem(t,e){e&&t.selected?this.deselectItem(t):t.selectable&&!t.selected&&(t.setSelected(!0),this.selectedItems.push(t))}deselectItem(t){const e=this.selectedItems.indexOf(t);if(e>-1){const t=this.selectedItems.splice(e,1)[0],i=this.tileMap.orders.children.find((e=>e.item===t));null!=i&&i.removeFromParent()}t.setSelected(!1)}endGame(t){this.gameEnded=!0,this.startModal.showModal(t)}handleResize({viewWidth:t,viewHeight:e}){const{width:i,height:s}=this.tileMap.background,r=t>i?i:t,o=e-this.topBar.height;this.camera.handleResize({viewWidth:r,viewHeight:o>s?s:o});const{x:n,y:h}=this.tileMap.pivot;this.tileMap.handleResize({viewWidth:r,viewHeight:o}),this.topBar.handleResize({viewWidth:r,viewHeight:o,camX:n,camY:h});const d=t,l=e,c=i,u=this.topBar.height+s,p=d>c?(d-c)/2:0,g=l>u?(l-u)/2:0;(0,a.logLayout)(`aw=${d} (ow=${c}) x=${p} ah=${l} (oh=${u}) y=${g}`),this.x=p,this.y=g,(0,a.logLayout)(`x=${p} y=${g}`);const m=d>c?c:d,w=l>u?u:l;this.startModal.position.set(m/2-this.startModal.width/2,w/2-this.startModal.height/2)}handleUpdate(t){if(this.gameEnded)return void(this.startModal.visible&&this.startModal.handleUpdate(t));this.time+=t;const{x:e,y:i}=this.tileMap.pivot;this.topBar.handleUpdate({deltaMS:t,camX:e,camY:i}),this.tileMap.handleUpdate(t),this.camera.handleUpdate(t),this.drawOrders()}drawOrders(){this.selectedItems.forEach((t=>{if(t.type===g.EItemType.vehicles||t.type===g.EItemType.aircraft){let e=this.tileMap.orders.children.find((e=>e.item===t));null==e&&(e=new b.Order({item:t}),this.tileMap.orders.addChild(e)),e.drawOrderLine({selectedItem:t,tileMap:this.tileMap})}}))}runLevel({mapImageSrc:t,mapSettingsSrc:e}){this.tileMap.cleanFromAll(),this.topBar.statusBar.cleanFromAll(),this.startModal.cleanFromAll(),this.tileMap.initLevel({mapImageSrc:t,mapSettingsSrc:e,viewWidth:this.camera.width,viewHeight:this.camera.height})}clearSelection(){for(let t=0;t<this.selectedItems.length;t++){const e=this.selectedItems[t];this.deselectItem(e),t--}}prepareTextures(){const t=s.Assets.get("spritesheet"),{animations:e,textures:i}=t;d.Base.prepareTextures({blueTextures:{healthyTextures:e["base-blue-healthy"],damagedTextures:[i["base-blue-damaged.png"]],constructingTextures:e["base-blue-contructing"]},greenTextures:{healthyTextures:e["base-green-healthy"],damagedTextures:[i["base-green-damaged.png"]],constructingTextures:e["base-green-contructing"]}}),M.GroundTurret.prepareTextures({blueTextures:{healthyTextures:[i["ground-turret-blue-healthy-up.png"]],upTextures:[i["ground-turret-blue-healthy-up.png"]],upRightTextures:[i["ground-turret-blue-healthy-up-right.png"]],rightTextures:[i["ground-turret-blue-healthy-right.png"]],downRightTextures:[i["ground-turret-blue-healthy-down-right.png"]],downTextures:[i["ground-turret-blue-healthy-down.png"]],downLeftTextures:[i["ground-turret-blue-healthy-down-left.png"]],leftTextures:[i["ground-turret-blue-healthy-left.png"]],upLeftTextures:[i["ground-turret-blue-healthy-up-left.png"]],damagedTextures:[i["ground-turret-blue-damaged.png"]],teleportTextures:e["ground-turret-blue-teleport"]},greenTextures:{healthyTextures:[i["ground-turret-green-healthy-up.png"]],upTextures:[i["ground-turret-green-healthy-up.png"]],upRightTextures:[i["ground-turret-green-healthy-up-right.png"]],rightTextures:[i["ground-turret-green-healthy-right.png"]],downRightTextures:[i["ground-turret-green-healthy-down-right.png"]],downTextures:[i["ground-turret-green-healthy-down.png"]],downLeftTextures:[i["ground-turret-green-healthy-down-left.png"]],leftTextures:[i["ground-turret-green-healthy-left.png"]],upLeftTextures:[i["ground-turret-green-healthy-up-left.png"]],damagedTextures:[i["ground-turret-green-damaged.png"]],teleportTextures:e["ground-turret-green-teleport"]}}),k.OilDerrick.prepareTextures({blueTextures:{healthyTextures:e["oil-derrick-blue-healthy"],damagedTextures:[i["oil-derrick-blue-damaged.png"]],deployTextures:e["oil-derrick-blue-deploy"]},greenTextures:{healthyTextures:e["oil-derrick-green-healthy"],damagedTextures:[i["oil-derrick-green-damaged.png"]],deployTextures:e["oil-derrick-green-deploy"]}}),A.Starport.prepareTextures({blueTextures:{healthyTextures:e["starport-blue-healthy"],damagedTextures:[i["starport-blue-damaged.png"]],teleportTextures:e["starport-blue-teleport"],closingTextures:e["starport-blue-closing"]},greenTextures:{healthyTextures:e["starport-green-healthy"],damagedTextures:[i["starport-green-damaged.png"]],teleportTextures:e["starport-green-teleport"],closingTextures:e["starport-green-closing"]}}),l.Harvester.prepareTextures({blueTextures:{upTextures:[i["harvester-blue-up.png"]],upRightTextures:[i["harvester-blue-up-right.png"]],rightTextures:[i["harvester-blue-right.png"]],downRightTextures:[i["harvester-blue-down-right.png"]],downTextures:[i["harvester-blue-down.png"]],downLeftTextures:[i["harvester-blue-down-left.png"]],leftTextures:[i["harvester-blue-left.png"]],upLeftTextures:[i["harvester-blue-up-left.png"]]},greenTextures:{upTextures:[i["harvester-green-up.png"]],upRightTextures:[i["harvester-green-up-right.png"]],rightTextures:[i["harvester-green-right.png"]],downRightTextures:[i["harvester-green-down-right.png"]],downTextures:[i["harvester-green-down.png"]],downLeftTextures:[i["harvester-green-down-left.png"]],leftTextures:[i["harvester-green-left.png"]],upLeftTextures:[i["harvester-green-up-left.png"]]}}),c.HeavyTank.prepareTextures({blueTextures:{upTextures:[i["heavy-tank-blue-up.png"]],upRightTextures:[i["heavy-tank-blue-up-right.png"]],rightTextures:[i["heavy-tank-blue-right.png"]],downRightTextures:[i["heavy-tank-blue-down-right.png"]],downTextures:[i["heavy-tank-blue-down.png"]],downLeftTextures:[i["heavy-tank-blue-down-left.png"]],leftTextures:[i["heavy-tank-blue-left.png"]],upLeftTextures:[i["heavy-tank-blue-up-left.png"]]},greenTextures:{upTextures:[i["heavy-tank-green-up.png"]],upRightTextures:[i["heavy-tank-green-up-right.png"]],rightTextures:[i["heavy-tank-green-right.png"]],downRightTextures:[i["heavy-tank-green-down-right.png"]],downTextures:[i["heavy-tank-green-down.png"]],downLeftTextures:[i["heavy-tank-green-down-left.png"]],leftTextures:[i["heavy-tank-green-left.png"]],upLeftTextures:[i["heavy-tank-green-up-left.png"]]}}),u.ScoutTank.prepareTextures({blueTextures:{upTextures:[i["scout-tank-blue-up.png"]],upRightTextures:[i["scout-tank-blue-up-right.png"]],rightTextures:[i["scout-tank-blue-right.png"]],downRightTextures:[i["scout-tank-blue-down-right.png"]],downTextures:[i["scout-tank-blue-down.png"]],downLeftTextures:[i["scout-tank-blue-down-left.png"]],leftTextures:[i["scout-tank-blue-left.png"]],upLeftTextures:[i["scout-tank-blue-up-left.png"]]},greenTextures:{upTextures:[i["scout-tank-green-up.png"]],upRightTextures:[i["scout-tank-green-up-right.png"]],rightTextures:[i["scout-tank-green-right.png"]],downRightTextures:[i["scout-tank-green-down-right.png"]],downTextures:[i["scout-tank-green-down.png"]],downLeftTextures:[i["scout-tank-green-down-left.png"]],leftTextures:[i["scout-tank-green-left.png"]],upLeftTextures:[i["scout-tank-green-up-left.png"]]}}),p.Transport.prepareTextures({blueTextures:{upTextures:[i["transport-blue-up.png"]],upRightTextures:[i["transport-blue-up-right.png"]],rightTextures:[i["transport-blue-right.png"]],downRightTextures:[i["transport-blue-down-right.png"]],downTextures:[i["transport-blue-down.png"]],downLeftTextures:[i["transport-blue-down-left.png"]],leftTextures:[i["transport-blue-left.png"]],upLeftTextures:[i["transport-blue-up-left.png"]]},greenTextures:{upTextures:[i["transport-green-up.png"]],upRightTextures:[i["transport-green-up-right.png"]],rightTextures:[i["transport-green-right.png"]],downRightTextures:[i["transport-green-down-right.png"]],downTextures:[i["transport-green-down.png"]],downLeftTextures:[i["transport-green-down-left.png"]],leftTextures:[i["transport-green-left.png"]],upLeftTextures:[i["transport-green-up-left.png"]]}}),w.Bullet.prepareTextures({textures:{upTextures:[i["bullet-up.png"]],upRightTextures:[i["bullet-up-right.png"]],rightTextures:[i["bullet-right.png"]],downRightTextures:[i["bullet-down-right.png"]],downTextures:[i["bullet-down.png"]],downLeftTextures:[i["bullet-down-left.png"]],leftTextures:[i["bullet-left.png"]],upLeftTextures:[i["bullet-up-left.png"]],explodeTextures:e["bullet-explode"]}}),x.CannonBall.prepareTextures({textures:{upTextures:[i["cannon-ball-up.png"]],upRightTextures:[i["cannon-ball-up-right.png"]],rightTextures:[i["cannon-ball-right.png"]],downRightTextures:[i["cannon-ball-down-right.png"]],downTextures:[i["cannon-ball-down.png"]],downLeftTextures:[i["cannon-ball-down-left.png"]],leftTextures:[i["cannon-ball-left.png"]],upLeftTextures:[i["cannon-ball-up-left.png"]],explodeTextures:e["cannon-ball-explode"]}}),f.Laser.prepareTextures({textures:{upTextures:[i["fire-ball-up.png"]],upRightTextures:[i["fire-ball-up-right.png"]],rightTextures:[i["fire-ball-right.png"]],downRightTextures:[i["fire-ball-down-right.png"]],downTextures:[i["fire-ball-down.png"]],downLeftTextures:[i["fire-ball-down-left.png"]],leftTextures:[i["fire-ball-left.png"]],upLeftTextures:[i["fire-ball-up-left.png"]],explodeTextures:e["fire-ball-explode"]}}),y.Rocket.prepareTextures({textures:{upTextures:[i["heatseeker-up.png"]],upRightTextures:[i["heatseeker-up-right.png"]],rightTextures:[i["heatseeker-right.png"]],downRightTextures:[i["heatseeker-down-right.png"]],downTextures:[i["heatseeker-down.png"]],downLeftTextures:[i["heatseeker-down-left.png"]],leftTextures:[i["heatseeker-left.png"]],upLeftTextures:[i["heatseeker-up-left.png"]],explodeTextures:e["heatseeker-explode"]}}),r.StatusBar.prepareTextures({textures:{girl1Texture:i["character-girl1.png"],girl2Texture:i["character-girl2.png"],man1Texture:i["character-man1.png"],systemTexture:i["character-system.png"]}}),v.StartModal.prepareTextures({textures:{iconHomeTexture:i["icon-home.png"],iconRepeatTexture:i["icon-repeat.png"],iconNextTexture:i["icon-next.png"]}}),T.Firework.prepareTextures({textures:{texture:C.SceneManager.app.renderer.generateTexture(T.Firework.prepareGraphics())}})}processCommand(t,e){let i;if("attack"!==e.type&&"guard"!==e.type||"number"!=typeof e.toUid||(i=this.tileMap.getItemByUid(e.toUid),null!=i&&!i.isDead()))for(const s of t){const t=this.tileMap.getItemByUid(s);null!=t&&(t.orders=Object.assign({},e),"move"===e.type?t instanceof u.ScoutTank?m.AUDIO.play("scout-tank-yes"):t instanceof c.HeavyTank?m.AUDIO.play("heavy-tank-yes"):m.AUDIO.play("acknowledge-moving"):"attack"===e.type&&(t instanceof u.ScoutTank?m.AUDIO.play("scout-tank-attack"):t instanceof c.HeavyTank?m.AUDIO.play("heavy-tank-attack"):m.AUDIO.play("acknowledge-attacking")),null==i||"attack"!==t.orders.type&&"guard"!==t.orders.type||(t.orders.to=i))}}showMessage({character:t,message:e,playSound:i=!0}){i&&m.AUDIO.play("message-received"),this.topBar.statusBar.appendMessage({character:t,message:e,time:this.time})}}B.options={doubleTapMaxTime:300,wheelScaleFactor:1.5,pinchScaleFactor:1},e.Game=B},1519:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hitbox=void 0;const s=i(8687),r=i(5473);class o extends s.Graphics{constructor({initX:t,initY:e,initGridX:i,initGridY:o,initWidth:n,initHeight:a}){super(),this.initGridX=i,this.initGridY=o,this.beginFill(16711680),this.drawRect(0,0,n,a),this.endFill(),this.alpha=r.logHitboxes.enabled?.5:0,this.position.set(t,e),null!=i&&null!=o&&this.addChild(new s.Text(`x=${i}\ny=${o}`,{fontSize:8,fill:16776960,align:"center"}))}getRectBounds(){return{top:this.y,right:this.x+this.width,bottom:this.y+this.height,left:this.x}}}e.Hitbox=o},1420:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LifeBar=void 0;const s=i(8687);class r extends s.Container{constructor(t){super(),this.borderThickness=t.borderThickness,this.setup()}setup(){this.borderBox=new s.Graphics,this.addChild(this.borderBox);const t=new s.Container;this.addChild(t),this.bars=t,this.emptyBar=new s.Graphics,t.addChild(this.emptyBar);const e=new s.Graphics;t.addChild(e),this.fillBar=e}draw({borderColor:t,borderAlpha:e,fillColor:i,emptyColor:s,width:r,height:o,borderThickness:n}){const{borderBox:a,fillBar:h,emptyBar:d}=this;a.beginFill(t),a.drawRect(0,0,r,o),a.endFill(),a.alpha=e,this.bars.position.set(n,n),d.beginFill(s),d.drawRect(0,0,r-2*n,o-2*n),d.endFill(),h.beginFill(i),h.drawRect(0,0,r-2*n,o-2*n),h.endFill()}updateLife(t){this.fillBar.width=(this.emptyBar.width-this.borderThickness)*t}}e.LifeBar=r},1557:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderScene=e.manifest=void 0;const s=i(8687),r=i(5473);e.manifest={bundles:[{name:"initial-bundle",assets:{spritesheet:"assets/spritesheets/spritesheet.json",menuBackground:"assets/images/splashscreen.png",level1Background:"assets/levels/level-1.png",level1Settings:"assets/levels/level-1.json"}}]};class o extends s.Container{constructor(t){super(),this.downloadProgress=t=>{this.loaderBarFill.width=(o.barOptions.width-2*o.barOptions.borderThick)*t},this.setup(),this.draw()}setup(){const t=new s.Graphics;this.addChild(t),this.loaderBarBorder=t;const e=new s.Graphics;this.addChild(e),this.loaderBarFill=e}draw(){const{barOptions:t}=o,{loaderBarFill:e,loaderBarBorder:i}=this;i.beginFill(t.borderColor),i.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),i.endFill(),e.beginFill(t.fillColor),e.drawRoundedRect(t.borderThick,t.borderThick,t.width-2*t.borderThick,t.height-2*t.borderThick,t.borderRadius),e.endFill()}async initializeLoader(){await s.Assets.init({manifest:e.manifest}),await s.Assets.loadBundle(e.manifest.bundles[0].name,this.downloadProgress)}getAssets(){return{spritesheet:s.Assets.get("spritesheet"),menuBackground:s.Assets.get("menuBackground")}}handleResize({viewWidth:t,viewHeight:e}){const i=t,s=e,n=this.width,a=this.height;if(i>=n&&s>=a){const t=i>n?(i-n)/2:0,e=s>a?(s-a)/2:0;(0,r.logLayout)(`Spacing aw=${i} tw=${n} ah=${s} th=${a}`),this.x=t,this.width=o.barOptions.width,this.y=e,this.height=o.barOptions.height}else{let t=1;a>=n?(t=s/a,t*n>i&&(t=i/n),(0,r.logLayout)(`By height (sc=${t})`)):(t=i/n,(0,r.logLayout)(`By width (sc=${t})`),t*a>s&&(t=s/a));const e=Math.floor(n*t),o=Math.floor(a*t),h=i>e?(i-e)/2:0,d=s>o?(s-o)/2:0;(0,r.logLayout)(`aw=${i} (ow=${e}) ah=${s} (oh=${o})`),this.x=h,this.width=e,this.y=d,this.height=o}(0,r.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}o.barOptions={width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},e.LoaderScene=o},5502:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MapSettings=void 0;class i{static findTileLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"tilelayer"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" tile layer`);return i}static findObjectGroupLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"objectgroup"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" object group layer`);return i}static mapObjectToPositions({mapSettings:t,layerName:e}){const s=[],r=i.findObjectGroupLayer({name:e,mapSettings:t});for(let t=0;t<r.objects.length;t++){const e=r.objects[t];s.push({x:e.x,y:e.y,width:e.width,height:e.height})}return s}static mapTilesToPositions({mapSettings:t,layerName:e,tileIds:s}){const r=[],o=i.findTileLayer({name:e,mapSettings:t}),n=t.width;for(let e=0;e<o.data.length;e+=n)o.data.slice(e,e+n).forEach(((i,o)=>{(Array.isArray(s)&&s.includes(i)||0!==i)&&r.push({x:o*t.tilewidth,y:e/n*t.tileheight,width:t.tilewidth,height:t.tileheight})}));return r}}e.MapSettings=i},9772:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MenuScene=void 0;const s=i(8687),r=i(3110),o=i(5473),n=i(9483),a=i(665),h=i(2550);class d extends s.Container{constructor(t){super(),this.gravity=.7,this.gameEnded=!1,this.choices=new s.Container,this.drawMainOptions=()=>{this.clearFromAll();const{mainOffset:t}=d.options.choices;this.choices.position.set(t.x,t.y);const e={text:"",fontSize:48,textColor:16777215,textColorHover:16776960,shadowTextColor:8388736,shadowThickness:2,buttonIdleAlpha:0,buttonHoverAlpha:0},i=new n.Button({onClick:this.drawMissionOptions,...e,text:"Campaign"});this.choices.addChild(i);const s=new n.Button({onClick:this.goToMultiplayerScene,...e,text:"Versus CPU"});this.choices.addChild(s),s.position.set(0,i.height)},this.drawMissionOptions=()=>{this.clearFromAll();const{missionOffset:t}=d.options.choices;this.choices.position.set(t.x,t.y);const e=s.Assets.get("spritesheet"),{textures:i}=e,r={text:"",fontSize:32,textColor:16777215,textColorHover:16776960,shadowTextColor:8388736,shadowThickness:2,buttonIdleAlpha:0,buttonHoverAlpha:0},o=new n.Button({iconTexture:i["icon-home.png"],onClick:this.drawMainOptions,...r,text:"Home",btnWidth:200,btnHeight:50,iconScale:1,iconColor:16777215,iconColorHover:16776960,fontSize:48});this.choices.addChild(o),[0,1].forEach((t=>{const e=new n.Button({onClick:()=>{this.goToCampaignScene(t)},...r,text:`Mission ${t+1}`});e.position.set(0,this.choices.height),this.choices.addChild(e)}))},this.goToCampaignScene=t=>{r.SceneManager.changeScene({name:"campaign",newScene:new h.CampaignScene({app:r.SceneManager.app,viewWidth:r.SceneManager.width,viewHeight:r.SceneManager.height,missionIdx:t}),initialResize:!1}).catch(console.error)},this.goToMultiplayerScene=()=>{},this.setup(t),this.drawMainOptions(),setTimeout((()=>{a.TileMap.idleLoad().catch(console.error)}),1e3)}setup({menuTexture:t}){const e=new s.Sprite(t);this.addChild(e),this.background=e,this.addChild(this.choices)}clearFromAll(){for(;this.choices.children.length>0;)this.choices.children[0].removeFromParent()}handleResize({viewWidth:t,viewHeight:e}){const i=t,s=e,{width:r,height:n}=this.background.texture,a=r,h=n;let d=1;h>=a?s<h&&(d=s/h,d*a>i&&(d=i/a),(0,o.logLayout)(`By height (sc=${d})`)):i<a&&(d=i/a,d*h>s&&(d=s/h),(0,o.logLayout)(`By width (sc=${d})`));const l=Math.floor(a*d),c=Math.floor(h*d),u=i>l?(i-l)/2:0,p=s>c?(s-c)/2:0;(0,o.logLayout)(`aw=${i} (ow=${l}) x=${u} ah=${s} (oh=${c}) y=${p}`),this.x=u,this.width=l,this.y=p,this.height=c,(0,o.logLayout)(`x=${u} y=${p} w=${this.width} h=${this.height}`)}handleUpdate(t){}}d.options={choices:{mainOffset:{x:50,y:320},missionOffset:{x:50,y:50}}},e.MenuScene=d},3301:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MiniMap=void 0;const s=i(8687),r=i(5473),o=i(3200),n=i(7697);class a extends s.Container{constructor(t){super(),this.rebuildRequired=!0,this.pointerDownX=-1,this.pointerDownY=-1,this.border=new s.Graphics,this.backgroundContainer=new s.Container,this.background=new s.Sprite,this.cameraRect=new s.Graphics,this.activeItems=new s.Container,this.handlePointerDown=t=>{const e=this.background.toLocal(t);if(this.pointerDownX=e.x,this.pointerDownY=e.y,(0,r.logPointerEvent)(`MiniMap pdX=${this.pointerDownX} pdX=${this.pointerDownY} down`),this.pointerDownX>-1&&this.pointerDownY>-1)if(e.x>=this.cameraRect.x&&e.x<=this.cameraRect.x+this.cameraRect.width&&e.y>=this.cameraRect.y&&e.y<=this.cameraRect.y+this.cameraRect.height);else{const t=e.x-.5*this.cameraRect.width,i=e.y-.5*this.cameraRect.height;this.game.tileMap.goTo({x:t,y:i})}},this.handlePointerUp=t=>{this.pointerDownX=this.pointerDownY=-1,(0,r.logPointerEvent)(`MiniMap pdX=${this.pointerDownX} pdX=${this.pointerDownY} up`)},this.handlePointerMove=t=>{if(this.pointerDownX>-1&&this.pointerDownY>-1){const e=this.background.toLocal(t);(0,r.logPointerEvent)(`MiniMap pdX=${this.pointerDownX} pdX=${this.pointerDownY} mX=${e.x} mY=${e.y}`),this.game.tileMap.goDiff({diffX:e.x-this.pointerDownX,diffY:e.y-this.pointerDownY}),this.pointerDownX=e.x,this.pointerDownY=e.y}},this.handlePointerLeave=t=>{this.pointerDownX=this.pointerDownY=-1,(0,r.logPointerEvent)(`Game pdX=${this.pointerDownX} pdX=${this.pointerDownY} up`)},this.game=t.game,this.initWidth=t.initWidth,this.initHeight=t.initHeight,this.setup(),this.draw(),this.addEventLesteners()}setup(){this.addChild(this.border),this.background.addChild(this.cameraRect),this.background.addChild(this.activeItems),this.backgroundContainer.addChild(this.background);const{borderWidth:t}=a.options;this.backgroundContainer.position.set(t,t),this.addChild(this.backgroundContainer)}draw(){const{initWidth:t,initHeight:e}=this,{borderColor:i,backgroundColor:s,borderWidth:r}=a.options;this.border.beginFill(i),this.border.drawRect(0,0,t,e),this.border.endFill(),this.border.beginFill(s),this.border.drawRect(r,r,t-2*r,e-2*r),this.border.endFill()}addEventLesteners(){this.background.eventMode="static",this.background.on("pointerdown",this.handlePointerDown),this.background.on("pointerup",this.handlePointerUp),this.background.on("pointermove",this.handlePointerMove),this.background.on("pointerleave",this.handlePointerLeave)}assignBackgroundTexture({texture:t,camX:e,camY:i}){this.background.texture=t,this.fit({texture:t}),this.drawCameraRect(),this.updateCameraRect({camX:e,camY:i})}handleUpdate({camX:t,camY:e}){this.updateCameraRect({camX:t,camY:e}),this.updateItems()}handleResize({viewWidth:t,viewHeight:e,camX:i,camY:s}){this.drawCameraRect(),this.updateCameraRect({camX:i,camY:s})}fit({texture:t}){const{initWidth:e,initHeight:i}=this,{borderWidth:s}=a.options,{width:r,height:o}=t,n=e-2*s,h=i-2*s;let d=1;d=r>=o?n/r:h/o,this.background.scale.set(d);const{width:l,height:c}=this.background,u=n>l?(n-l)/2:0,p=h>c?(h-c)/2:0;this.background.x=u,this.background.y=p}drawCameraRect(){const{cameraRectColor:t,cameraRectThickness:e}=a.options;this.cameraRect.clear(),this.cameraRect.beginFill(t);const{width:i,height:s}=this.game.camera,{scale:{x:r,y:o}}=this.game.tileMap,n=i/r,h=s/o,{scale:{x:d,y:l}}=this.background,c=e/d,u=e/l;this.cameraRect.drawRect(0,0,n,h),this.cameraRect.endFill(),this.cameraRect.beginHole(),this.cameraRect.drawRect(c,u,n-2*c,h-2*u),this.cameraRect.endHole()}updateCameraRect({camX:t=0,camY:e=0}){this.cameraRect.position.set(t,e)}updateItems(){this.rebuildRequired&&this.drawItems()}drawItems(){for(;this.activeItems.children.length>0;)this.activeItems.children[0].removeFromParent();const{width:t,height:e}=this.background.texture,i=0+t,r=0+e,{itemBlueTeamClor:h,itemGreeTeamClor:d}=a.options,{activeItems:l}=this.game.tileMap;for(let t=0;t<l.children.length;t++){const e=l.children[t],a=new s.Graphics;a.beginFill(e.team===o.Team.blue?h:d);const c=e.getSelectionBounds();c.left<0&&c.right<0||c.left>i&&c.right>i||c.top<0&&c.bottom<0||c.top>r&&c.bottom>r||(e.type===n.EItemType.buildings?a.drawRect(0,0,c.right-c.left,c.bottom-c.top):e.type!==n.EItemType.vehicles&&e.type!==n.EItemType.aircraft||a.drawCircle(0,0,(c.right-c.left)/2),a.endFill(),a.position.set(c.left,c.top),this.activeItems.addChild(a))}}}a.options={borderColor:4539717,backgroundColor:4741996,borderWidth:2,cameraRectColor:12690711,cameraRectThickness:2,itemBlueTeamClor:255,itemGreeTeamClor:65280},e.MiniMap=a},8350:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Order=void 0;const s=i(8687);class r extends s.Graphics{constructor({item:t}){super(),this.item=t}getLineColor(t){switch(t){case"move":return 65280;case"attack":return 16711680;case"patrol":return 16776960;case"guard":return 255;default:return 16777215}}getDestinationColor(t){switch(t){case"move":return 65280;case"attack":return 16711680;case"patrol":return 65535;case"guard":return 255;default:return 16777215}}getFromRadius(t){return"patrol"===t?3:0}getDestinationRadius(t){switch(t){case"attack":case"guard":return 15;default:return 3}}drawOrderLine({selectedItem:t,tileMap:e}){const i=t.getSelectionPosition({center:!0});let s,o;switch(t.orders.type){case"move":s=i,o={x:t.orders.toPoint.gridX*e.gridSize,y:t.orders.toPoint.gridY*e.gridSize};break;case"attack":case"guard":{const r=null!=t.orders.toUid?e.getItemByUid(t.orders.toUid):t.orders.to;null!=r&&(s=i,o=r.getSelectionPosition({center:!0}));break}case"patrol":s={x:t.orders.fromPoint.gridX*e.gridSize,y:t.orders.fromPoint.gridY*e.gridSize},o={x:t.orders.toPoint.gridX*e.gridSize,y:t.orders.toPoint.gridY*e.gridSize}}if(null==s||null==o)return void this.clear();const{type:n}=t.orders,{dash:a,gap:h,lineWidth:d}=r.options;this.clear(),this.lineStyle({width:d,color:this.getLineColor(n)}),this.drawCircle(s.x,s.y,this.getFromRadius(n));const l=Math.hypot(o.x-s.x,o.y-s.y),c=(o.x-s.x)/l,u=(o.y-s.y)/l;this.moveTo(s.x,s.y).lineTo(s.x+a*c,s.y+a*u);let p=a+h;for(;p<l;)this.moveTo(s.x+p*c,s.y+p*u),p+=a,p>l?(p=l,this.lineTo(s.x+p*c,s.y+p*u)):(this.lineTo(s.x+p*c,s.y+p*u),p+=h);this.lineStyle({width:d,color:this.getDestinationColor(n)}),this.drawCircle(o.x,o.y,this.getDestinationRadius(n)),this.endFill(),this.alpha=.5}}r.options={dash:16,gap:8,lineWidth:1},e.Order=r},9060:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Firework=void 0;const s=i(8687);class r extends s.Sprite{constructor({texture:t}){super(t),this.markedForDeletion=!1,this.velocity={vx:0,vy:0}}handleUpdate(){this.x-=this.velocity.vx,this.y-=this.velocity.vy,this.alpha*=.99,this.alpha<.1&&(this.markedForDeletion=!0)}}class o extends r{static prepareTextures({textures:t}){o.textures=t}constructor(){super({texture:o.textures.texture}),this.width=this.height=10*Math.random()+10,this.velocity.vx=10*Math.random()-5,this.velocity.vy=2*Math.random()+1,this.tint=16777215*Math.random()<<0}handleUpdate(){this.velocity.vy-=o.options.gravity,super.handleUpdate()}static prepareGraphics(){const t=new s.Graphics;return t.beginFill(16777215),t.drawCircle(0,0,o.options.renderRadius),t.endFill(),t.cacheAsBitmap=!0,t}}o.options={gravity:.08,renderRadius:100},e.Firework=o},9759:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ReloadBar=void 0;const s=i(8687);class r extends s.Container{constructor(t){super(),this.setup()}setup(){const t=new s.Graphics;this.addChild(t),this.fillBar=t}draw({fillColor:t,width:e,height:i,alpha:s}){this.maxWidth=e;const{fillBar:r}=this;r.beginFill(t),r.drawRect(0,0,e,i),r.endFill(),r.alpha=s}updateReload(t){this.fillBar.width=this.maxWidth*t}}e.ReloadBar=r},3110:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;const s=i(8687),r=i(5473);class o extends s.Container{init(){}handleUpdate(){}handleResize(){}}class n{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var t;const e=new s.Application({autoDensity:!0,resolution:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,width:n.width,height:n.height,resizeTo:window});document.body.appendChild(e.view),r.logApp.enabled&&((0,r.logApp)("window.app initialized!"),window.app=e),n.app=e,n.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",n.resizeDeBounce),n.app.ticker.add(n.updateHandler)}static async changeScene({name:t,newScene:e,initialResize:i=!0}){if(null!=e?n.scenes.has(t)||n.scenes.set(t,e):e=n.scenes.get(t),null==e)throw new Error("Unable to detect new scene");n.app.stage.removeChild(n.currentScene),n.currentScene=e,n.app.stage.addChild(n.currentScene),i&&n.resizeHandler(),"function"==typeof e.mountedHandler&&e.mountedHandler()}static resizeDeBounce(){n.cancelScheduledResizeHandler(),n.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(n.resizeTimeoutId)}static scheduleResizeHandler(){n.resizeTimeoutId=setTimeout((()=>{n.cancelScheduledResizeHandler(),n.resizeHandler()}),n.resizeTimeout)}static resizeHandler(){n.currentScene.handleResize({viewWidth:n.width,viewHeight:n.height})}static updateHandler(){n.currentScene.handleUpdate(n.app.ticker.deltaMS)}}n.currentScene=new o,n.resizeTimeout=300,n.scenes=new Map,e.SceneManager=n},6879:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StartModal=void 0;const s=i(8687),r=i(9483),o=i(9060);class n extends s.Container{static prepareTextures({textures:t}){n.textures=t}constructor(t){super(),this.sucess=!1,this.elapsedSpawnFrames=0,this.spawnFrame=Math.floor(20*Math.random()+60),this.particles=new s.ParticleContainer(300,{position:!0,scale:!0,tint:!0}),this.boxOptions={backgroundColor:4539717,outerBorderColor:4741996,outerBorderWidth:3,width:350,height:250,borderRadius:5},this.reasonTextOptions={top:-50,textColor:12690711,strokeColor:8388736,strokeThickness:1,textSize:20,fontWeight:"bold",lineHeight:30},this.buttonOptions={top:170,leftOne:105,leftTwo:15,paddingLeft:20,paddingTop:15,widthOne:150,widthLeft:150,widthRight:150,height:50,fillRegular:4539717,fillError:10105874,fillSuccess:2278750,borderRadius:10,iconScale:.5},this.buttonTextOptions={top:95,textColor:16777215,textSize:20,textColorHover:16776960},this.setup(t),this.draw(t)}setup(t){this.modalBox=new s.Graphics,this.addChild(this.modalBox);const{boxOptions:e,reasonTextOptions:i}=this;this.reasonText=new s.Text("-",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight,fontFamily:"'Courier New', Courier, monospace",align:"center",wordWrap:!0,wordWrapWidth:e.width-2*e.outerBorderWidth,stroke:i.strokeColor,strokeThickness:i.strokeThickness,lineHeight:i.lineHeight}),this.reasonText.anchor.set(.5,.5),this.reasonText.position.set(e.width/2,e.height/2+i.top),this.addChild(this.reasonText)}draw(t){const{boxOptions:{width:e,height:i,backgroundColor:s,outerBorderWidth:r,outerBorderColor:o,borderRadius:n}}=this;let a=0,h=0,d=e,l=i;this.modalBox.beginFill(s),this.modalBox.drawRoundedRect(a,h,d,l,n),this.modalBox.endFill(),a+=r,h+=r,d-=2*r,l-=2*r,this.modalBox.beginFill(o),this.modalBox.drawRoundedRect(a,h,d,l,n),this.modalBox.endFill()}showModal({message:t,success:e,view:i,onLeftClick:s,onRightClick:o}){const{iconHomeTexture:a,iconNextTexture:h,iconRepeatTexture:d}=n.textures,{leftOne:l,leftTwo:c,top:u,fillRegular:p,fillSuccess:g,fillError:m,widthOne:w,widthLeft:x,widthRight:f,height:y,borderRadius:b,paddingTop:v,paddingLeft:T,iconScale:C}=this.buttonOptions,{textSize:S,textColor:M,textColorHover:k}=this.buttonTextOptions;this.sucess=e,this.visible=!0,this.reasonText.text=t;const A={text:"Home",fontSize:S,textColor:M,textColorHover:k,iconColor:M,iconColorHover:k,onClick:s,iconTexture:a,iconScale:C,paddingLeft:T,paddingTop:v,btnHeight:y,btnRadius:b},B={text:"",fontSize:S,textColor:M,textColorHover:k,iconColor:M,iconColorHover:k,onClick:o,iconScale:C,paddingLeft:T,paddingTop:v,buttonIdleColor:e?g:m,btnWidth:f,btnHeight:y,btnRadius:b,initX:c+x+T,initY:u};switch(i){case"home":A.buttonIdleColor=e?g:m,A.btnWidth=w,A.initX=l,A.initY=u;break;case"home-next":{A.buttonIdleColor=p,A.btnWidth=x,A.initX=c,A.initY=u,B.text="Next",B.iconTexture=h;const t=new r.Button(B);this.addChild(t);break}case"home-repeat":{A.buttonIdleColor=p,A.btnWidth=x,A.initX=c,A.initY=u,B.text="Repeat",B.iconTexture=d;const t=new r.Button(B);this.addChild(t);break}}const P=new r.Button(A);this.addChild(P),this.addChild(this.particles)}hideModal(){this.visible=!1}cleanFromAll(){for(this.hideModal();null!=this.particles.children[0];)this.particles.children[0].removeFromParent()}handleUpdate(t){if(this.visible){if(this.particles.children.forEach((t=>{t.handleUpdate()})),this.elapsedSpawnFrames>=this.spawnFrame&&this.sucess){const t={x:Math.random()*this.width,y:Math.random()*this.height};for(let e=0;e<30;e++){const e=new o.Firework;this.particles.addChild(e),e.position.set(t.x,t.y)}this.spawnFrame=Math.floor(20*Math.random()+60),this.elapsedSpawnFrames=0}this.elapsedSpawnFrames+=1;for(let t=0;t<this.particles.children.length;t++){const e=this.particles.children[t];e.markedForDeletion&&(e.removeFromParent(),t--)}}}}e.StartModal=n},8554:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBar=e.EMessageCharacter=void 0;const s=i(8687),r=i(5473);var o;!function(t){t.system="system",t.op="op",t.pilot="pilot",t.driver="driver"}(o=e.EMessageCharacter||(e.EMessageCharacter={}));class n extends s.Container{constructor(t){super(),this.setupAndDraw(t)}setupAndDraw({texture:t,message:e,time:i,maxWidth:r=0}){const{characterWidth:o,timeTextSize:h,timeTextColor:d}=n.options,l=new s.Sprite(t);l.width=o,l.height=l.scale.x*l.height,this.addChild(l),this.img=l;const c=new s.Text(a.getTimeText(i),{fontSize:h,fill:d});c.position.set(l.x,l.height),this.addChild(c),this.reAppendMessage({maxWidth:r,message:e})}reAppendMessage({maxWidth:t,message:e}){null!=this.msgText&&(e=this.msgText.text,this.msgText.destroy());const{padding:i,messageTextSize:r,messageTextColor:o}=n.options,a=new s.Text(e,{fontSize:r,fill:o,wordWrap:!0,wordWrapWidth:t-this.img.width-2*i});a.position.set(this.img.width+i,0),this.addChild(a),this.msgText=a}}n.options={padding:20,characterWidth:40,timeTextColor:8558242,timeTextSize:12,messageTextColor:12690711,messageTextSize:14};class a extends s.Container{static prepareTextures({textures:t}){a.textures=t}constructor(t){super(),this.scrollToLastMessage=!1,this.pointerDownY=-1,this.handlePointerDown=t=>{const e=this.messageList.toLocal(t);this.pointerDownY=e.y,(0,r.logPointerEvent)(`StatusBar.pointerDownY=${this.pointerDownY} down`)},this.handlePointerUp=()=>{this.pointerDownY=-1,(0,r.logPointerEvent)(`StatusBar.pointerDownY=${this.pointerDownY} up`)},this.handlePointerLeave=()=>{this.pointerDownY=-1,(0,r.logPointerEvent)(`StatusBar.pointerDownY=${this.pointerDownY} leave`)},this.handlePointerMove=t=>{if((0,r.logPointerEvent)(`StatusBar.pointerDownY=${this.pointerDownY} move`),this.pointerDownY>-1){const e=this.messageList.toLocal(t);(0,r.logPointerEvent)(`localPositionX=${e.x} localPositionY=${e.y}`);const i=this.pointerDownY-e.y;this.messageList.pivot.y+=i;const{maxPivot:s}=this,{pivot:o}=this.messageList;o.y<=0?o.y=0:o.y>s&&(o.y=s)}},this.handleWheel=t=>{let e=this.messageList.pivot.y+t.deltaY/10;const{maxPivot:i}=this;e<=0?e=0:e>i&&(e=i),this.messageList.pivot.y=e},this.setup(),this.draw(t),this.addEventLesteners()}static getTimeText(t){const e=Math.trunc(t/36e5),i=Math.trunc((t-e)/6e4),s=Math.trunc((t-e-i)/1e3),r=t=>String(t).padStart(2,"0");return`Time:\n${r(e)}:${r(i)}:${r(s)}`}setup(){const t=new s.Graphics;this.addChild(t),this.graphicsBox=t;const e=new s.Graphics;t.addChild(e),this.graphicsBoxShadow=e;const i=new s.Graphics;t.addChild(i),this.messageListMask=i;const r=new s.Container;t.addChild(r),this.messageList=r}draw({initWidth:t,initHeight:e}){const{options:{backgroundColor:i,outerBorderColor:s,outerBorderWidth:r,innerBorderColor:o,innerBorderWidth:n,innerBorderRadius:h,shadowColor:d,shadowWidth:l,shadowAlpha:c}}=a;let u=0,p=0,g=t,m=e;this.graphicsBox.clear(),this.graphicsBox.beginFill(s),this.graphicsBox.drawRect(u,p,g,m),this.graphicsBox.endFill(),u+=r,p+=r,g-=2*r,m-=2*r,this.graphicsBox.beginFill(o),this.graphicsBox.drawRoundedRect(u,p,g,m,h),this.graphicsBox.endFill(),u+=n,p+=n,g-=2*n,m-=2*n,this.graphicsBox.beginFill(i),this.graphicsBox.drawRoundedRect(u,p,g,m,h),this.graphicsBox.endFill(),this.graphicsBoxShadow.clear(),this.graphicsBoxShadow.position.set(u,p),this.graphicsBoxShadow.lineStyle({width:l,color:d}),this.graphicsBoxShadow.drawRoundedRect(0,0,g,m,h),this.graphicsBoxShadow.endFill(),this.graphicsBoxShadow.alpha=c,u+=h,p+=h,g-=2*h,m-=2*h,this.messageListMask.position.set(u,p),this.drawMask({width:g,height:m}),this.messageList.mask=this.messageListMask,this.messageList.position.set(u,p)}drawMask({width:t,height:e}){const{options:{backgroundColor:i,innerBorderRadius:s}}=a;this.messageListMask.clear(),this.messageListMask.beginFill(i),this.messageListMask.drawRoundedRect(0,0,t,e,s),this.messageListMask.endFill(),this.messageList.mask=this.messageListMask}appendMessage({character:t,message:e,time:i}){let s;switch(t){case o.system:s=a.textures.systemTexture;break;case o.op:s=a.textures.girl1Texture;break;case o.pilot:s=a.textures.girl2Texture;break;case o.driver:s=a.textures.man1Texture}if(null!=this.messageList.mask){const{padding:t}=a.options,r=new n({texture:s,message:e,time:i,maxWidth:this.maxMessageWidth});r.position.set(t,0===this.messageList.height?t:this.messageList.height+2*t),this.messageList.addChild(r);const{maxPivot:o}=this;this.messageList.height>o&&(this.scrollToLastMessage=!0)}}get maxPivot(){const{padding:t}=a.options,e=this.messageList.mask.height-2*t;return this.messageList.height-e}handleUpdate(t){if(this.scrollToLastMessage){const{maxPivot:t}=this;this.messageList.pivot.y<t-.01?this.messageList.pivot.y+=.01*t:this.scrollToLastMessage=!1}}addEventLesteners(){this.eventMode="static",this.on("pointerdown",this.handlePointerDown),this.on("pointermove",this.handlePointerMove),this.on("pointerup",this.handlePointerUp),this.on("pointerleave",this.handlePointerLeave),this.on("wheel",this.handleWheel)}cleanFromAll(){for(;null!=this.messageList.children[0];)this.messageList.children[0].removeFromParent();this.scrollToLastMessage=!1,this.messageList.pivot.y=0}get maxMessageWidth(){return this.messageList.mask.width-2*a.options.padding}setLimit({width:t,height:e}){if(this.width===t)return;const{padding:i}=a.options,s=[];for(let t=0;t<this.messageList.children.length;t++){const e=this.messageList.children[t];e.removeFromParent(),s.push(e),t--}this.draw({initWidth:t,initHeight:e}),s.forEach((t=>{t.position.set(i,0===this.messageList.height?i:this.messageList.height+2*i),t.reAppendMessage({maxWidth:this.maxMessageWidth}),this.messageList.addChild(t)})),this.messageList.pivot.y=0,this.scrollToLastMessage=!0}}a.options={outerBorderColor:4741996,outerBorderWidth:3,innerBorderColor:1578774,innerBorderWidth:2,innerBorderRadius:3,backgroundColor:4539717,shadowColor:1578774,shadowWidth:3,shadowAlpha:.5,padding:10},e.StatusBar=a},665:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TileMap=void 0;const s=i(8687),r=i(5502),o=i(1519),n=i(1557),a=i(7697);class h extends s.Container{constructor(t){super(),this.currentMapTerrainGrid=[],this.rebuildRequired=!1,this._currentMapPassableGrid=[],this._currentCopyMapPassableGrid=[],this.hitboxes=new s.Container,this.activeItems=new s.Container,this.orders=new s.Container,this.projectiles=new s.Container,this.background=new s.Sprite,this.minXPivot=0,this.maxXPivot=0,this.minYPivot=0,this.maxYPivot=0,this.minScale=0,this.maxScale=0,this.game=t.game,this.setup(),"number"==typeof t.initX&&(this.position.x=t.initX),"number"==typeof t.initY&&(this.position.y=t.initY)}setup(){this.addChild(this.background),this.addChild(this.hitboxes),this.addChild(this.activeItems),this.addChild(this.orders),this.addChild(this.projectiles)}static async idleLoad(){await s.Assets.loadBundle(n.manifest.bundles.map((t=>t.name)).filter(((t,e)=>e>0)))}initLevel({mapImageSrc:t,mapSettingsSrc:e,viewWidth:i,viewHeight:n}){const a=s.Assets.get(t),h=s.Assets.get(e);this.background.texture=a,this.background.scale.set(1,1),r.MapSettings.mapTilesToPositions({mapSettings:h,layerName:"Water,Clay,Lava,Rock-Fence"}).forEach((t=>{this.hitboxes.addChild(new o.Hitbox({initX:t.x,initY:t.y,initGridX:Math.floor(t.x/h.tilewidth),initGridY:Math.floor(t.y/h.tileheight),initWidth:t.width,initHeight:t.height}))})),this.gridSize=h.tilewidth,this.mapGridWidth=h.width,this.mapGridHeight=h.height,this.currentMapTerrainGrid=[];for(let t=0;t<h.height;t++){this.currentMapTerrainGrid[t]=[];for(let e=0;e<h.width;e++)this.currentMapTerrainGrid[t][e]=0}for(let t=this.hitboxes.children.length-1;t>=0;t--){const e=this.hitboxes.children[t];this.currentMapTerrainGrid[e.initGridY][e.initGridX]=1}this._currentMapPassableGrid=[],this.rebuildRequired=!0,this.calcScaleLimits(),this.calcPivotLimits()}handleResize({viewWidth:t,viewHeight:e}){this.calcScaleLimits(),this.checkScaleLimits(),this.calcPivotLimits(),this.checkPivotLimits()}calcPivotLimits(){const{width:t,height:e}=this.game.camera,{scale:i}=this,{width:s,height:r}=this.background,o=s*i.x,n=r*i.y;this.maxXPivot=o>t?(o-t)/i.x:0,this.minXPivot=0,this.maxYPivot=n>e?(n-e)/i.y:0,this.minYPivot=0}calcScaleLimits(){const{width:t,height:e}=this.game.camera,{maxScaleRatio:i}=h.options,{width:s,height:r}=this.background;this.minScale=1,this.maxScale=i*Math.min(s/t,r/e)}checkScaleLimits(){const{scale:t}=this;t.x<this.minScale?t.x=this.minScale:t.x>this.maxScale&&(t.x=this.maxScale),t.y<this.minScale?t.y=this.minScale:t.y>this.maxScale&&(t.y=this.maxScale)}cleanFromAll(){for(this.pivot.set(0,0);null!=this.hitboxes.children[0];)this.hitboxes.children[0].removeFromParent();for(;null!=this.activeItems.children[0];)this.activeItems.children[0].removeFromParent();for(;null!=this.projectiles.children[0];)this.projectiles.children[0].removeFromParent();for(;null!=this.orders.children[0];)this.orders.children[0].removeFromParent()}handleUpdate(t){const e=this.allItems;for(const i of e)i.handleUpdate(t);this.game.tileMap.activeItems.sortChildren()}addItem(t){t.type===a.EItemType.buildings||t.type===a.EItemType.vehicles?this.activeItems.addChild(t):t.type===a.EItemType.bullets&&this.projectiles.addChild(t)}get moveableItems(){return[...this.activeItems.children.filter((t=>t.type===a.EItemType.vehicles))]}get staticItems(){return[...this.activeItems.children.filter((t=>t.type===a.EItemType.buildings))]}get allItems(){return[...this.activeItems.children,...this.projectiles.children]}itemUnderPointer(t){return this.activeItems.children.find((e=>{const i=e.getSelectionBounds();return!!(e.isAlive()&&t.x>=i.left&&t.x<=i.right&&t.y>=i.top&&t.y<=i.bottom)}))}get currentMapPassableGrid(){return this.rebuildRequired&&(this.rebuildPassableGrid(),this.rebuildRequired=!1),this._currentMapPassableGrid}get currentCopyMapPassableGrid(){const{currentMapPassableGrid:t}=this;this._currentCopyMapPassableGrid.length=t.length;for(let e=0;e<t.length;e++){Array.isArray(this._currentCopyMapPassableGrid[e])?this._currentCopyMapPassableGrid[e].length=t[e].length:this._currentCopyMapPassableGrid[e]=new Array(t[e].length);for(let i=0;i<t[e].length;i++)this._currentCopyMapPassableGrid[e][i]=t[e][i]}return this._currentCopyMapPassableGrid}rebuildPassableGrid(){this._currentMapPassableGrid=this.currentMapTerrainGrid.map((t=>t.slice()));const{staticItems:t}=this;for(let e=t.length-1;e>=0;e--){const i=t[e],{passableGrid:s}=i,r=i.getGridXY();for(let t=s.length-1;t>=0;t--)for(let e=s[t].length-1;e>=0;e--)0!==s[t][e]&&(this._currentMapPassableGrid[r.gridY+t][r.gridX+e]=1)}}getItemByUid(t,e){return(null!=e?e:this.activeItems.children).find((e=>e.uid===t))}isItemsDead(t){Array.isArray(t)||(t=[t]);const{activeItems:e}=this;return t.some((t=>{const i=this.getItemByUid(t,e.children);return null==i||i.isDead()}))}goTo({x:t,y:e}){const{pivot:i}=this;i.x=t,i.y=e,this.checkPivotLimits()}goDiff({diffX:t,diffY:e}){const{pivot:i}=this;i.x+=t,i.y+=e,this.checkPivotLimits()}checkPivotLimits(){const{pivot:t}=this;t.x<this.minXPivot?t.x=this.minXPivot:t.x>this.maxXPivot&&(t.x=this.maxXPivot),t.y<this.minYPivot?t.y=this.minYPivot:t.y>this.maxYPivot&&(t.y=this.maxYPivot)}zoom({scaleFactor:t,sX:e=0,sY:i=0}){const s=Math.abs(t),{pivot:{x:r,y:o},scale:{x:n}}=this,a=e-r,h=i-o;let d;d=t>=0?n*s:n/s,d<this.minScale?d=this.minScale:d>this.maxScale&&(d=this.maxScale);const l=n/d;let c,u;c=a*l,u=h*l;const p=r+(t>=0?1:-1)*Math.abs(a-c),g=o+(t>=0?1:-1)*Math.abs(h-u);this.scale.set(d,d),this.pivot.set(p,g),this.checkScaleLimits(),this.calcPivotLimits(),this.checkPivotLimits()}}h.options={maxScaleRatio:5},e.TileMap=h},6103:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TopBar=void 0;const s=i(8687),r=i(8554),o=i(3301);class n extends s.Container{constructor(t){super(),this.setup(t)}setup({game:t}){const{statusBarWidth:e,miniMapWidth:i,initHeight:s}=n.options;this.statusBar=new r.StatusBar({initWidth:e,initHeight:s}),this.addChild(this.statusBar),this.miniMap=new o.MiniMap({game:t,initWidth:i,initHeight:s}),this.addChild(this.miniMap),this.miniMap.position.set(this.statusBar.width,0)}handleResize({viewWidth:t,viewHeight:e,camX:i,camY:s}){const{statusBarWidth:r,miniMapWidth:o,initHeight:a}=n.options,h=t-o,d=h>r?(h-r)/2:0;this.statusBar.position.set(d,0);const l=h>r?r:h;this.statusBar.setLimit({width:l,height:a}),this.miniMap.x=t-this.miniMap.width,this.miniMap.handleResize({viewWidth:t,viewHeight:e,camX:i,camY:s})}handleUpdate(t){this.statusBar.handleUpdate(t.deltaMS),this.miniMap.handleUpdate(t)}}n.options={statusBarWidth:600,miniMapWidth:150,initHeight:100},e.TopBar=n},6865:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=e.EVectorDirection=void 0,function(t){t[t.up=0]="up",t[t.upRight=1]="upRight",t[t.right=2]="right",t[t.downRight=3]="downRight",t[t.down=4]="down",t[t.downLeft=5]="downLeft",t[t.left=6]="left",t[t.upLeft=7]="upLeft"}(i=e.EVectorDirection||(e.EVectorDirection={})),e.Vector=class{constructor(t){this.directions=Object.keys(i).map(Number).filter(Number.isInteger).length,this.setDirection(t)}setDirection({direction:t}){this.direction=t}}},6752:(t,e,i)=>{i(7279);const s=i(3110),r=i(1557),o=i(9772);(async function(){var t;const e=document.querySelector(".loader");null!=e&&(null===(t=e.parentElement)||void 0===t||t.removeChild(e)),await s.SceneManager.initialize();const i=new r.LoaderScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height});await s.SceneManager.changeScene({name:"loader",newScene:i}),await i.initializeLoader();const{menuBackground:n}=i.getAssets();await s.SceneManager.changeScene({name:"menu",newScene:new o.MenuScene({app:s.SceneManager.app,viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height,menuTexture:n})})})().catch((t=>{var e;console.error(t);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(t)&&Boolean(t.message)?t.message:t);const s=document.querySelector(".error-stack");null!=s&&(s.classList.remove("hidden"),s.innerText=Boolean(t)&&Boolean(t.stack)?t.stack:"");const r=document.querySelector("canvas");null!=r&&(null===(e=r.parentElement)||void 0===e||e.removeChild(r))}))},7049:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIO=void 0;const r=i(1766),o=s(i(8178)),n=s(i(3209)),a=s(i(6844)),h=s(i(6851)),d=s(i(8602)),l=s(i(2980)),c=s(i(2704)),u=s(i(9376)),p=s(i(7822)),g=s(i(9748)),m=s(i(1040)),w=s(i(5286)),x=s(i(2044)),f=s(i(2254)),y=s(i(7574)),b=s(i(3987)),v=s(i(2763)),T=s(i(7976)),C=s(i(3534)),S=s(i(9345)),M=s(i(9275)),k=s(i(651)),A=s(i(6955)),B=s(i(978)),P=s(i(6707)),Y=s(i(5061)),L=s(i(5367)),D=s(i(4844)),X=s(i(5563)),R=s(i(4389)),G=s(i(3481)),I=s(i(6349)),O=s(i(3722)),E=s(i(2923));e.AUDIO={bullet1:new r.Howl({src:o.default}),bullet2:new r.Howl({src:n.default}),bulletHit0:new r.Howl({src:a.default}),bulletHit1:new r.Howl({src:h.default}),bulletHit2:new r.Howl({src:d.default}),bulletHit3:new r.Howl({src:l.default}),bulletHit4:new r.Howl({src:c.default}),bulletHit5:new r.Howl({src:u.default}),cannon1:new r.Howl({src:p.default}),cannon2:new r.Howl({src:g.default}),cannonHit:new r.Howl({src:m.default}),click:new r.Howl({src:w.default}),engaging:new r.Howl({src:x.default}),gun:new r.Howl({src:f.default}),heatseeker1:new r.Howl({src:y.default}),heatseeker2:new r.Howl({src:b.default}),laser1:new r.Howl({src:v.default}),laser2:new r.Howl({src:T.default}),message:new r.Howl({src:C.default}),roger1:new r.Howl({src:S.default}),roger2:new r.Howl({src:M.default}),yup:new r.Howl({src:k.default}),vultureAttack0:new r.Howl({src:A.default}),vultureYes0:new r.Howl({src:B.default}),vultureYes1:new r.Howl({src:P.default}),vultureYes2:new r.Howl({src:Y.default}),vultureYes3:new r.Howl({src:L.default}),tankAttack0:new r.Howl({src:D.default}),tankAttack1:new r.Howl({src:X.default}),tankAttack2:new r.Howl({src:R.default}),tankYes0:new r.Howl({src:G.default}),tankYes1:new r.Howl({src:I.default}),tankYes2:new r.Howl({src:O.default}),tankYes3:new r.Howl({src:E.default}),play(t){let e=!1,i=[];"acknowledge-attacking"===t?(e=!0,i=[this.engaging]):"acknowledge-moving"===t?(e=!0,i=[this.yup,this.roger1,this.roger2]):"bullet"===t?i=[this.bullet1,this.bullet2]:"bullet-hit"===t?i=[this.bulletHit0,this.bulletHit1,this.bulletHit2,this.bulletHit3,this.bulletHit4,this.bulletHit5]:"rocket"===t?i=[this.heatseeker1,this.heatseeker2]:"laser"===t?i=[this.laser1,this.laser2]:"cannon-ball"===t?i=[this.cannon1,this.cannon2]:"cannon-hit"===t?i=[this.cannonHit]:"message-received"===t?i=[this.message]:"scout-tank-attack"===t?(e=!0,i=[this.vultureAttack0]):"scout-tank-yes"===t?(e=!0,i=[this.vultureYes0,this.vultureYes1,this.vultureYes2,this.vultureYes3]):"heavy-tank-attack"===t?(e=!0,i=[this.tankAttack0,this.tankAttack1,this.tankAttack2]):"heavy-tank-yes"===t&&(e=!0,i=[this.tankYes0,this.tankYes1,this.tankYes2,this.tankYes3]),i.length>0&&(e&&i.forEach((t=>t.stop())),i[Math.floor(Math.random()*i.length)].play())}}},4539:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;const s=i(8687),r=i(3200),o=i(756);class n extends o.Building{static textures(t){return t===r.Team.blue?n.blueTextures:n.greenTextures}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}constructor(t){var e;super({...t,textures:n.textures(t.team)}),this.drawSelectionOptions={width:44,height:44,radius:0,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:-2,y:18}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:40,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:0,y:-4}},this.sight=4,this.hitPoints=500,this.life=this.hitPoints,this.constructingAnimationSpeed=.1,this.buildableGrid=[[1,1],[1,1]],this.passableGrid=[[1,1],[1,1]],this.setupChild(),this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===r.Team.blue?255:65280,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.updateAnimation(),this.checkDrawBuildingBounds()}setupChild(){const{constructingTextures:t}=n.textures(this.team),e=new s.AnimatedSprite(t);e.animationSpeed=this.constructingAnimationSpeed,this.spritesContainer.addChild(e),this.constructingAnimation=e}}e.Base=n},756:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuildingAnimation=e.Building=void 0;const s=i(8687),r=i(3200),o=i(7697),n=i(1420),a=i(5473),h=i(9759);class d extends s.Container{constructor(t){var e;super(),this.selected=!1,this.selectable=!0,this.selectedGraphics=new s.Container,this.drawSelectionOptions={width:0,height:0,radius:0,strokeWidth:0,strokeColor:0,strokeSecondColor:0,offset:{x:0,y:0}},this.drawLifeBarOptions={borderColor:0,borderThickness:0,borderAlpha:0,width:0,height:0,fillColor:0,emptyColor:0,offset:{x:0,y:0}},this.drawReloadBarOptions={alpha:0,width:0,height:0,fillColor:0,offset:{x:0,y:0}},this.spritesContainer=new s.Container,this.buildableGrid=[],this.passableGrid=[],this.hitPoints=0,this.life=0,this.sight=0,this.radius=0,this.canAttack=!1,this.canAttackLand=!1,this.canAttackAir=!1,this.cost=0,this.reloadTimeLeft=0,this.type=o.EItemType.buildings,this.ordersable=!0,this.healthyAnimationSpeed=.1,this.damagedAnimationSpeed=.1,this.uid="number"==typeof t.uid?t.uid:(0,r.generateUid)(),this.game=t.game,this.team=t.team,this.orders=null!==(e=t.orders)&&void 0!==e?e:{type:"stand"},null!=t.life&&(this.life=t.life),"boolean"==typeof t.selectable&&(this.selectable=t.selectable),"boolean"==typeof t.ordersable&&(this.ordersable=t.ordersable),this.setup(t)}setup({textures:{healthyTextures:t,damagedTextures:e}}){this.addChild(this.selectedGraphics),this.addChild(this.spritesContainer);const{healthyAnimationSpeed:i,damagedAnimationSpeed:r}=this,o=new s.AnimatedSprite(t);o.animationSpeed=i,this.spritesContainer.addChild(o),this.healthyAnimation=o;const a=new s.AnimatedSprite(e);a.animationSpeed=r,this.spritesContainer.addChild(a),this.damagedAnimation=a,this.lifeBar=new n.LifeBar(this.drawLifeBarOptions),this.addChild(this.lifeBar),this.reloadBar=new h.ReloadBar(this.drawReloadBarOptions),this.addChild(this.reloadBar)}drawSelection(){const{offset:t,strokeWidth:e,strokeColor:i,strokeSecondColor:r,width:o,height:n}=this.drawSelectionOptions;this.selectedGraphics.position.set(t.x,t.y);const a=new s.Graphics;this.selectedGraphics.addChild(a);const h=o/2,d=n/2;a.beginFill(i),a.drawRect(0,0,h,e),a.endFill(),a.beginFill(r),a.drawRect(h,0,h,e),a.endFill(),a.beginFill(i),a.drawRect(o-e,0,e,d),a.endFill(),a.beginFill(r),a.drawRect(o-e,d,e,d),a.endFill(),a.beginFill(i),a.drawRect(h,n-e,h,e),a.endFill(),a.beginFill(r),a.drawRect(0,n-e,h,e),a.endFill(),a.beginFill(i),a.drawRect(0,d,e,d),a.endFill(),a.beginFill(r),a.drawRect(0,0,e,d),a.endFill(),this.selectedGraphics.alpha=0}hideAllAnimations(){this.spritesContainer.children.forEach((t=>{t.visible=!1}))}switchAnimation(t){let e;switch(t){case l.healthy:e=this.healthyAnimation;break;case l.damaged:e=this.damagedAnimation}e!==this.currentAnimation&&(this.currentAnimation=e,this.hideAllAnimations(),this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0)}updateAnimation(){this.isHealthy()?this.switchAnimation(l.healthy):this.isAlive()&&this.switchAnimation(l.damaged)}setSelected(t){this.selectedGraphics.alpha=t?.5:0,this.selected=t}getSelectionPosition({center:t=!1}={}){const e=this.drawSelectionOptions.strokeWidth,i={x:this.x+this.selectedGraphics.x+e,y:this.y+this.selectedGraphics.y+e};return t&&(i.x+=(this.selectedGraphics.width-2*e)/2,i.y+=(this.selectedGraphics.height-2*e)/2),i}getSelectionBounds(){const t=this.getSelectionPosition(),e=this.drawSelectionOptions.strokeWidth;return{top:t.y,right:t.x+this.selectedGraphics.width-2*e,bottom:t.y+this.selectedGraphics.height-2*e,left:t.x}}getGridXY({floor:t=!1,center:e=!1}={}){const{gridSize:i}=this.game.tileMap,s=this.getSelectionPosition({center:e}),r={gridX:s.x/i,gridY:s.y/i};return t&&(r.gridX=Math.floor(r.gridX),r.gridY=Math.floor(r.gridY)),r}setPositionByXY({x:t,y:e,center:i=!1}){const s=this.drawSelectionOptions.strokeWidth,r=0-(this.selectedGraphics.x+(i?this.selectedGraphics.width/2:s)),o=0-(this.selectedGraphics.y+(i?this.selectedGraphics.height/2:s));this.position.set(t+r,e+o)}setPositionByGridXY({gridX:t,gridY:e,center:i}){const{gridSize:s}=this.game.tileMap;this.setPositionByXY({x:t*s,y:e*s,center:i})}checkDrawBuildingBounds(){if(a.logBuildingBounds.enabled){const t=this.getSelectionBounds(),e=new s.Graphics;e.beginFill(16777215),e.alpha=.5,e.drawRect(t.left-this.x,t.top-this.y,t.right-t.left,t.bottom-t.top),e.endFill(),this.addChild(e)}}isAlive(){return this.life>0}isHealthy(){return this.life>=.4*this.hitPoints}isDead(){return!this.isAlive()}subLife(t){this.life-=t,this.life<=0?this.removeAndDestroy():(this.updateLife(),this.updateAnimation())}removeAndDestroy(){this.game.deselectItem(this),this.removeFromParent(),this.game.tileMap.rebuildRequired=!0}drawLifeBar(){this.lifeBar.draw(this.drawLifeBarOptions);const{offset:t}=this.drawLifeBarOptions;this.lifeBar.position.set(t.x,t.y)}updateLife(){this.lifeBar.updateLife(this.life/this.hitPoints)}processOrders(){}handleUpdate(t){this.processOrders(),this.zIndex=this.y+this.height}isValidTarget(t){return t.team!==this.team&&(this.canAttackLand&&(t.type===o.EItemType.buildings||t.type===o.EItemType.vehicles)||this.canAttackAir&&t.type===o.EItemType.aircraft)}findTargetInSight(t=0){const e=this.getGridXY({center:!0}),i={},s=this.game.tileMap.activeItems.children;for(let r=s.length-1;r>=0;r--){const o=s[r];if(this.isValidTarget(o)){const s=o.getGridXY({center:!0}),r=Math.pow(s.gridX-e.gridX,2)+Math.pow(s.gridY-e.gridY,2);r<Math.pow(this.sight+t,2)&&(Array.isArray(i[r])||(i[r]=[]),i[r].push(o))}}return Object.keys(i).map(Number).sort(((t,e)=>t-e)).map((t=>i[t])).flat()[0]}drawReloadBar(){this.reloadBar.draw(this.drawReloadBarOptions);const{offset:t}=this.drawReloadBarOptions;this.reloadBar.position.set(t.x,t.y)}updateReload(){const{reloadTime:t}=this.Projectile;this.reloadBar.updateReload((t-this.reloadTimeLeft)/t)}}var l;e.Building=d,function(t){t.healthy="healthy",t.damaged="damaged"}(l=e.BuildingAnimation||(e.BuildingAnimation={}))},4536:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroundTurret=e.GroundTurretAnimation=void 0;const s=i(8687),r=i(3200),o=i(756),n=i(6865),a=i(3452);var h;(h=e.GroundTurretAnimation||(e.GroundTurretAnimation={})).healthy="healthy",h.damaged="damaged",h.teleport="teleport";class d extends o.Building{static textures(t){return t===r.Team.blue?d.blueTextures:d.greenTextures}static prepareTextures({blueTextures:t,greenTextures:e}){d.blueTextures=t,d.greenTextures=e}constructor(t){var e;super({...t,textures:d.textures(t.team)}),this.drawSelectionOptions={width:26,height:23,radius:0,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:6,y:9}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:22,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:8,y:-2}},this.drawReloadBarOptions={alpha:1,width:22,height:2,fillColor:12690711,offset:{x:8,y:3}},this.sight=10,this.cost=1500,this.hitPoints=200,this.life=this.hitPoints,this.teleportingAnimationSpeed=.1,this.canAttack=!0,this.canAttackLand=!0,this.canAttackAir=!1,this.vector=new n.Vector({direction:n.EVectorDirection.down}),this.moveTurning=!1,this.turnSpeed=4,this.Projectile=a.CannonBall,this.orders={type:"sentry"},this.buildableGrid=[[1]],this.passableGrid=[[1]],this.setupChild(),null!=t.direction&&this.vector.setDirection({direction:t.direction}),this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===r.Team.blue?255:65280,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.drawReloadBar(),this.updateReload(),this.updateAnimation(),this.checkDrawBuildingBounds()}setupChild(){const{teleportTextures:t,upTextures:e,upRightTextures:i,rightTextures:r,downRightTextures:o,downTextures:n,downLeftTextures:a,leftTextures:h,upLeftTextures:l}=d.textures(this.team),c=new s.AnimatedSprite(t);c.animationSpeed=this.teleportingAnimationSpeed,this.spritesContainer.addChild(c),this.teleportingAnimation=c;const u=new s.AnimatedSprite(e);this.spritesContainer.addChild(u),this.upAnimation=u;const p=new s.AnimatedSprite(i);this.spritesContainer.addChild(p),this.upRightAnimation=p;const g=new s.AnimatedSprite(r);this.spritesContainer.addChild(g),this.rightAnimation=g;const m=new s.AnimatedSprite(o);this.spritesContainer.addChild(m),this.downRightAnimation=m;const w=new s.AnimatedSprite(n);this.spritesContainer.addChild(w),this.downAnimation=w;const x=new s.AnimatedSprite(a);this.spritesContainer.addChild(x),this.downLeftAnimation=x;const f=new s.AnimatedSprite(h);this.spritesContainer.addChild(f),this.leftAnimation=f;const y=new s.AnimatedSprite(l);this.spritesContainer.addChild(y),this.upLeftAnimation=y}switchAnimation(t){let e;switch(t){case o.BuildingAnimation.healthy:{const t=.5,{direction:i}=this.vector;e=i>=n.EVectorDirection.upLeft+t&&i<=n.EVectorDirection.upLeft+1||i>=n.EVectorDirection.up&&i<=n.EVectorDirection.upRight-t?this.upAnimation:i>=n.EVectorDirection.upRight+t&&i<=n.EVectorDirection.downRight-t?this.rightAnimation:i>=n.EVectorDirection.downRight+t&&i<=n.EVectorDirection.downLeft-t?this.downAnimation:i>=n.EVectorDirection.downLeft+t&&i<=n.EVectorDirection.upLeft-t?this.leftAnimation:i>n.EVectorDirection.up&&i<n.EVectorDirection.right?this.upRightAnimation:i>n.EVectorDirection.right&&i<n.EVectorDirection.down?this.downRightAnimation:i>=n.EVectorDirection.down&&i<n.EVectorDirection.left?this.downLeftAnimation:this.upLeftAnimation;break}case o.BuildingAnimation.damaged:e=this.damagedAnimation}e!==this.currentAnimation&&(this.currentAnimation=e,this.hideAllAnimations(),this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0)}processOrders(){if(this.isHealthy()){switch(this.orders.type){case"sentry":{const t=this.findTargetInSight();null!=t&&(this.orders={type:"attack",to:t,nextOrder:this.orders});break}case"attack":{if(null==this.orders.to)return;const t=this.getGridXY({center:!0}),e=this.orders.to.getGridXY({center:!0}),i=Math.pow(e.gridX-t.gridX,2)+Math.pow(e.gridY-t.gridY,2);if(this.orders.to.isDead()||!this.isValidTarget(this.orders.to)||i>Math.pow(this.sight,2)){const t=this.findTargetInSight();null!=t?this.orders.to=t:this.orders={type:"sentry"}}if("attack"!==this.orders.type||null==this.orders.to)return;const{turnSpeedAdjustmentFactor:s,tileMap:o}=this.game,n=(0,r.findAngleGrid)({from:e,to:t,directions:this.vector.directions}),a=(0,r.angleDiff)({angle1:this.vector.direction,angle2:n,directions:this.vector.directions}),h=this.turnSpeed*s;if(Math.abs(a)>h)this.vector.setDirection({direction:(0,r.wrapDirection)({direction:this.vector.direction+h*Math.abs(a)/a,directions:this.vector.directions})}),this.moveTurning=!0;else if(this.vector.setDirection({direction:n}),this.moveTurning=!1,this.reloadTimeLeft<=0){this.reloadTimeLeft=this.Projectile.reloadTime;const e=-Math.round(this.vector.direction)/this.vector.directions*2*Math.PI,i=t.gridX-this.radius*Math.sin(e)/o.gridSize,s=t.gridY-this.radius*Math.cos(e)/o.gridSize,r=new this.Projectile({game:this.game,initX:i*o.gridSize,initY:s*o.gridSize,direction:n,target:this.orders.to});o.addItem(r)}break}}this.updateAnimation()}}handleUpdate(t){this.reloadTimeLeft>0&&(this.reloadTimeLeft-=this.game.reloadAdjustmentFactor),this.processOrders(),this.updateReload(),this.zIndex=this.y+this.height}}e.GroundTurret=d},6667:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OilDerrick=void 0;const s=i(8687),r=i(3200),o=i(756);class n extends o.Building{static textures(t){return t===r.Team.blue?n.blueTextures:n.greenTextures}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}constructor(t){var e;super({...t,textures:n.textures(t.team)}),this.drawSelectionOptions={width:40,height:22,radius:0,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:0,y:39}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:36,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:2,y:-4}},this.sight=3,this.cost=5e3,this.hitPoints=300,this.life=this.hitPoints,this.deployAnimationSpeed=.1,this.buildableGrid=[[1,1]],this.passableGrid=[[1,1]],this.setupChild(),this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===r.Team.blue?255:65280,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.updateAnimation(),this.checkDrawBuildingBounds()}setupChild(){const{deployTextures:t}=n.textures(this.team),e=new s.AnimatedSprite(t);e.animationSpeed=this.deployAnimationSpeed,this.spritesContainer.addChild(e),this.deployAnimation=e}}e.OilDerrick=n},1097:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Starport=void 0;const s=i(8687),r=i(3200),o=i(756);class n extends o.Building{static textures(t){return t===r.Team.blue?n.blueTextures:n.greenTextures}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}constructor(t){var e;super({...t,textures:n.textures(t.team)}),this.drawSelectionOptions={width:42,height:58,radius:0,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:-1,y:3}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:38,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:1,y:-4}},this.sight=3,this.cost=2e3,this.hitPoints=300,this.life=this.hitPoints,this.teleportingAnimationSpeed=.1,this.closingAnimationSpeed=.1,this.buildableGrid=[[1,1],[1,1],[1,1]],this.passableGrid=[[1,1],[0,0],[0,0]],this.setupChild(),this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===r.Team.blue?255:65280,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.updateAnimation(),this.checkDrawBuildingBounds()}setupChild(){const{teleportTextures:t,closingTextures:e}=n.textures(this.team),i=new s.AnimatedSprite(t);i.animationSpeed=this.teleportingAnimationSpeed,this.spritesContainer.addChild(i),this.teleportingAnimation=i;const r=new s.AnimatedSprite(e);r.animationSpeed=this.closingAnimationSpeed,this.spritesContainer.addChild(r),this.closingAnimation=r}}e.Starport=n},3200:(t,e)=>{function i({direction:t,directions:e}){return t<0&&(t+=e),t>=e&&(t-=e),t}var s;Object.defineProperty(e,"__esModule",{value:!0}),e.generateUid=e.checkCollision=e.angleDiff=e.findAngleGrid=e.findAngle=e.wrapDirection=e.Team=void 0,(s=e.Team||(e.Team={})).blue="blue",s.green="green",e.wrapDirection=i,e.findAngle=function({from:t,to:e,directions:s}){const r=t.y-e.y,o=t.x-e.x;return i({direction:s/2-Math.atan2(o,r)*s/(2*Math.PI),directions:s})},e.findAngleGrid=function({from:t,to:e,directions:s}){const r=t.gridY-e.gridY,o=t.gridX-e.gridX;return i({direction:s/2-Math.atan2(o,r)*s/(2*Math.PI),directions:s})},e.angleDiff=function({angle1:t,angle2:e,directions:i}){t>=i/2&&(t-=i),e>=i/2&&(e-=i);let s=e-t;return s<-i/2&&(s+=i),s>i/2&&(s-=i),s},e.checkCollision=function(t,e,i="a"){const s=Math.max(e.left,t.left),r=Math.min(e.right,t.right);if(r<=s)return 0;const o=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom);return n>o?(r-s)*(n-o)/("a"===i?(t.right-t.left)*(t.bottom-t.top):(e.right-e.left)*(e.bottom-e.top)):0};let r=1e3;e.generateUid=function(){return++r}},7697:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.EItemType=void 0,(i=e.EItemType||(e.EItemType={})).buildings="buildings",i.vehicles="vehicles",i.aircraft="aircraft",i.terrain="terrain",i.bullets="bullets"},5473:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logBuildingBounds=e.logProjectileBounds=e.logVehiclePath=e.logVehicleBounds=e.logHitboxes=e.logKeyup=e.logKeydown=e.logPointerEvent=e.logLayout=e.logApp=void 0;const r=s(i(1227));e.logApp=(0,r.default)("rts-app"),e.logLayout=(0,r.default)("rts-layout"),e.logPointerEvent=(0,r.default)("rts-pointer-event"),e.logKeydown=(0,r.default)("rts-keydown"),e.logKeyup=(0,r.default)("rts-keyup"),e.logHitboxes=(0,r.default)("rts-hitboxes"),e.logVehicleBounds=(0,r.default)("rts-vehicle-bounds"),e.logVehiclePath=(0,r.default)("rts-vehicle-path"),e.logProjectileBounds=(0,r.default)("rts-projectile-bounds"),e.logBuildingBounds=(0,r.default)("rts-building-bounds")},9420:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bullet=void 0;const s=i(7049),r=i(5634);class o extends r.Projectile{constructor(t){super({...t,textures:o.textures}),this.speed=50,this.range=5,this.damage=1,s.AUDIO.play("bullet")}static prepareTextures({textures:t}){o.textures=t}playHitSound(){s.AUDIO.play("bullet-hit")}}o.reloadTime=2,o.shootAudio="",e.Bullet=o},3452:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CannonBall=void 0;const s=i(7049),r=i(5634);class o extends r.Projectile{constructor(t){super({...t,textures:o.textures}),this.speed=60,this.range=15,this.damage=20,s.AUDIO.play("cannon-ball")}static prepareTextures({textures:t}){o.textures=t}playHitSound(){s.AUDIO.cannonHit.play()}}o.reloadTime=40,e.CannonBall=o},9288:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rocket=void 0;const s=i(7049),r=i(5634);class o extends r.Projectile{constructor(t){super({...t,textures:o.textures}),this.speed=25,this.range=9,this.damage=20,this.turnSpeed=2,s.AUDIO.play("rocket")}static prepareTextures({textures:t}){o.textures=t}}o.reloadTime=40,e.Rocket=o},5191:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Laser=void 0;const s=i(7049),r=i(5634);class o extends r.Projectile{constructor(t){super({...t,textures:o.textures}),this.speed=60,this.range=8,this.damage=10,s.AUDIO.play("laser")}static prepareTextures({textures:t}){o.textures=t}}o.reloadTime=30,e.Laser=o},5634:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Projectile=void 0;const s=i(8687),r=i(7697),o=i(6865),n=i(3200),a=i(5473);class h extends s.Container{constructor(t){super(),this.sight=0,this.type=r.EItemType.bullets,this.ordersable=!0,this.range=0,this.damage=0,this.distanceTravelled=0,this.vector=new o.Vector({direction:o.EVectorDirection.down}),this.speed=0,this.turnSpeed=0,this.moveTurning=!1,this.hardCollision=!1,this.collisionCount=0,this.colliding=!1,this.lastMovementGridX=0,this.lastMovementGridY=0,this.spritesContainer=new s.Container,this.uid="number"==typeof t.uid?t.uid:(0,n.generateUid)(),this.game=t.game,this.orders={type:"fire",to:t.target},this.setup(t),this.setPositionByXY({x:t.initX,y:t.initY,center:!0}),this.vector.setDirection({direction:t.direction}),this.switchAnimationByDirection(t.direction),this.checkDrawProjectileBounds()}setup({textures:{upTextures:t,upRightTextures:e,rightTextures:i,downRightTextures:r,downTextures:o,downLeftTextures:n,leftTextures:a,upLeftTextures:h,explodeTextures:d}}){this.addChild(this.spritesContainer);const l=new s.AnimatedSprite(t);this.spritesContainer.addChild(l),this.upAnimation=l;const c=new s.AnimatedSprite(e);this.spritesContainer.addChild(c),this.upRightAnimation=c;const u=new s.AnimatedSprite(i);this.spritesContainer.addChild(u),this.rightAnimation=u;const p=new s.AnimatedSprite(r);this.spritesContainer.addChild(p),this.downRightAnimation=p;const g=new s.AnimatedSprite(o);this.spritesContainer.addChild(g),this.downAnimation=g;const m=new s.AnimatedSprite(n);this.spritesContainer.addChild(m),this.downLeftAnimation=m;const w=new s.AnimatedSprite(a);this.spritesContainer.addChild(w),this.leftAnimation=w;const x=new s.AnimatedSprite(h);this.spritesContainer.addChild(x),this.upLeftAnimation=x;const f=new s.AnimatedSprite(d);f.loop=!1,this.spritesContainer.addChild(f),this.explodeAnimation=f}hideAllAnimations(){this.spritesContainer.children.forEach((t=>{t.visible=!1}))}switchAnimationByDirection(t){let e;const i=.5;e=t>=o.EVectorDirection.upLeft+i&&t<=o.EVectorDirection.up||t>=o.EVectorDirection.up&&t<=o.EVectorDirection.upRight-i?this.upAnimation:t>=o.EVectorDirection.upRight+i&&t<=o.EVectorDirection.downRight-i?this.rightAnimation:t>=o.EVectorDirection.downRight+i&&t<=o.EVectorDirection.downLeft-i?this.downAnimation:t>=o.EVectorDirection.downLeft+i&&t<=o.EVectorDirection.upLeft-i?this.leftAnimation:t>o.EVectorDirection.up&&t<o.EVectorDirection.right?this.upRightAnimation:t>o.EVectorDirection.right&&t<o.EVectorDirection.down?this.downRightAnimation:t>=o.EVectorDirection.down&&t<o.EVectorDirection.left?this.downLeftAnimation:this.upLeftAnimation,e!==this.currentAnimation&&(this.currentAnimation=e,this.hideAllAnimations(),this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0)}switchToExplodeAnimation(){this.hideAllAnimations(),this.currentAnimation=this.explodeAnimation,this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0,this.currentAnimation.onComplete=()=>{this.removeFromParent()}}getSelectionPosition({center:t=!1}={}){const e={x:this.x,y:this.y};return t&&(e.x+=this.width/2,e.y+=this.height/2),e}getSelectionBounds(){const t=this.getSelectionPosition();return{top:t.y,right:t.x+this.width,bottom:t.y+this.height,left:t.x}}getGridXY({floor:t=!1,center:e=!1}={}){const{gridSize:i}=this.game.tileMap,s=this.getSelectionPosition({center:e}),r={gridX:s.x/i,gridY:s.y/i};return t&&(r.gridX=Math.floor(r.gridX),r.gridY=Math.floor(r.gridY)),r}setPositionByXY({x:t,y:e,center:i=!1}){const s=0-(i?this.upAnimation.width/2:0),r=0-(i?this.upAnimation.height/2:0);this.position.set(t+s,e+r)}setPositionByGridXY({gridX:t,gridY:e,center:i}){const{gridSize:s}=this.game.tileMap;this.setPositionByXY({x:t*s,y:e*s,center:i})}checkDrawProjectileBounds(){if(a.logProjectileBounds.enabled){const t=new s.Graphics;t.beginFill(16777215),t.alpha=.5,t.drawRect(0,0,this.width,this.height),t.endFill(),this.addChild(t)}}reachedTarget(){if("fire"===this.orders.type){const t=this.getSelectionBounds(),e=this.orders.to.getSelectionBounds();return(0,n.checkCollision)(t,e)>.35}return!1}playHitSound(){}isExploding(){return this.currentAnimation===this.explodeAnimation}processOrders(){switch(this.lastMovementGridX=0,this.lastMovementGridY=0,this.orders.type){case"fire":{const t=this.reachedTarget();this.distanceTravelled>this.range||t?t?(this.playHitSound(),this.orders.to.subLife(this.damage),this.switchToExplodeAnimation(),this.orders={type:"stand"}):this.removeFromParent():this._moveTo(this.orders.to);break}}}handleUpdate(t){this.processOrders()}_moveTo(t){const e=this.getGridXY({center:!0});if(this.turnSpeed>0){const i=t.getGridXY({center:!0}),s=(0,n.findAngleGrid)({from:i,to:e,directions:this.vector.directions}),r=(0,n.angleDiff)({angle1:this.vector.direction,angle2:s,directions:this.vector.directions}),o=this.turnSpeed*this.game.turnSpeedAdjustmentFactor;Math.abs(r)>o&&this.vector.setDirection({direction:(0,n.wrapDirection)({direction:this.vector.direction+o*Math.abs(r)/r,directions:this.vector.directions})})}const i=this.speed*this.game.speedAdjustmentFactor;this.distanceTravelled+=i;const s=-this.vector.direction/this.vector.directions*2*Math.PI;this.lastMovementGridX=-i*Math.sin(s),this.lastMovementGridY=-i*Math.cos(s);const r=e.gridX+this.lastMovementGridX,o=e.gridY+this.lastMovementGridY;this.setPositionByGridXY({gridX:r,gridY:o,center:!0})}}h.reloadTime=0,e.Projectile=h},9498:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Harvester=void 0;const s=i(3200),r=i(9420),o=i(1976);class n extends o.Vehicle{constructor(t){var e;super({...t,textures:t.team===s.Team.blue?n.blueTextures:n.greenTextures}),this.drawSelectionOptions={width:0,height:0,radius:10,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:-1,y:-2}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:20,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:1,y:-7}},this.radius=10,this.speed=10,this.sight=3,this.cost=1600,this.hitPoints=50,this.turnSpeed=2,this.Projectile=r.Bullet,this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===s.Team.blue?255:4243264,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.updateAnimation(),this.checkDrawVehicleBounds()}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}}e.Harvester=n},2273:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HeavyTank=void 0;const s=i(3200),r=i(3452),o=i(1976);class n extends o.Vehicle{constructor(t){var e;super({...t,textures:t.team===s.Team.blue?n.blueTextures:n.greenTextures}),this.drawSelectionOptions={width:0,height:0,radius:13,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:1,y:1}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:26,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:3,y:-8}},this.drawReloadBarOptions={alpha:1,width:26,height:2,fillColor:12690711,offset:{x:3,y:-3}},this.radius=13,this.speed=15,this.sight=10,this.cost=1200,this.hitPoints=50,this.turnSpeed=4,this.Projectile=r.CannonBall,this.canAttack=!0,this.canAttackLand=!0,this.canAttackAir=!1,this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===s.Team.blue?255:4243264,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.drawReloadBar(),this.updateReload(),this.updateAnimation(),this.checkDrawVehicleBounds()}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}}e.HeavyTank=n},3244:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScoutTank=void 0;const s=i(3200),r=i(9420),o=i(1976);class n extends o.Vehicle{constructor(t){var e;super({...t,textures:t.team===s.Team.blue?n.blueTextures:n.greenTextures}),this.drawSelectionOptions={width:0,height:0,radius:11,strokeWidth:2,strokeColor:0,strokeSecondColor:16777215,offset:{x:-2,y:-2}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:22,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:0,y:-7}},this.drawReloadBarOptions={alpha:1,width:22,height:2,fillColor:12690711,offset:{x:0,y:-2}},this.radius=11,this.speed=20,this.sight=4,this.cost=500,this.hitPoints=50,this.turnSpeed=4,this.Projectile=r.Bullet,this.canAttack=!0,this.canAttackLand=!0,this.canAttackAir=!1,this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===s.Team.blue?255:4243264,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.drawReloadBar(),this.updateReload(),this.updateAnimation(),this.checkDrawVehicleBounds()}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}}e.ScoutTank=n},4631:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const s=i(3200),r=i(9420),o=i(1976);class n extends o.Vehicle{constructor(t){var e;super({...t,textures:t.team===s.Team.blue?n.blueTextures:n.greenTextures}),this.drawSelectionOptions={width:0,height:0,radius:15,strokeWidth:2,strokeColor:16776960,strokeSecondColor:16777215,offset:{x:-2,y:-2}},this.drawLifeBarOptions={borderColor:16777215,borderThickness:1,borderAlpha:.5,width:30,height:5,fillColor:1409085,emptyColor:16711680,offset:{x:0,y:-7}},this.radius=15,this.speed=15,this.sight=3,this.cost=400,this.hitPoints=100,this.turnSpeed=2,this.Projectile=r.Bullet,this.life=null!==(e=t.life)&&void 0!==e?e:this.hitPoints,this.drawSelectionOptions.strokeColor=t.team===s.Team.blue?255:4243264,this.drawSelection(),this.setPositionByXY({x:t.initX,y:t.initY}),this.drawLifeBar(),this.updateLife(),this.updateAnimation(),this.checkDrawVehicleBounds()}static prepareTextures({blueTextures:t,greenTextures:e}){n.blueTextures=t,n.greenTextures=e}}e.Transport=n},1976:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vehicle=void 0;const s=i(8687),r=i(6865),o=i(3200),n=i(7697),a=i(9215),h=i(1420),d=i(5473),l=i(9759);var c;!function(t){t.soft="soft",t.hard="hard",t.attraction="attraction"}(c||(c={}));class u extends s.Container{constructor(t){var e;super(),this.selected=!1,this.selectable=!0,this.selectedGraphics=new s.Container,this.drawSelectionOptions={width:0,height:0,radius:0,strokeWidth:0,strokeColor:0,strokeSecondColor:0,offset:{x:0,y:0}},this.drawLifeBarOptions={borderColor:0,borderThickness:0,borderAlpha:0,width:0,height:0,fillColor:0,emptyColor:0,offset:{x:0,y:0}},this.drawReloadBarOptions={alpha:0,width:0,height:0,fillColor:0,offset:{x:0,y:0}},this.type=n.EItemType.vehicles,this.ordersable=!0,this.hitPoints=0,this.life=0,this.spritesContainer=new s.Container,this.vector=new r.Vector({direction:r.EVectorDirection.down}),this.speed=0,this.moveTurning=!1,this.turnSpeed=0,this.hardCollision=!1,this.collisionCount=0,this.colliding=!1,this.sight=0,this.radius=0,this.canAttack=!1,this.canAttackLand=!1,this.canAttackAir=!1,this.cost=0,this.reloadTimeLeft=0,this.uid="number"==typeof t.uid?t.uid:(0,o.generateUid)(),this.game=t.game,this.team=t.team,this.orders=null!==(e=t.orders)&&void 0!==e?e:{type:"stand"},this.setup(t),null!=t.direction&&this.vector.setDirection({direction:t.direction}),"boolean"==typeof t.selectable&&(this.selectable=t.selectable),"boolean"==typeof t.ordersable&&(this.ordersable=t.ordersable)}setup({textures:{upTextures:t,upRightTextures:e,rightTextures:i,downRightTextures:r,downTextures:o,downLeftTextures:n,leftTextures:a,upLeftTextures:d}}){this.addChild(this.selectedGraphics),this.addChild(this.spritesContainer);const c=new s.AnimatedSprite(t);this.spritesContainer.addChild(c),this.upAnimation=c;const u=new s.AnimatedSprite(e);this.spritesContainer.addChild(u),this.upRightAnimation=u;const p=new s.AnimatedSprite(i);this.spritesContainer.addChild(p),this.rightAnimation=p;const g=new s.AnimatedSprite(r);this.spritesContainer.addChild(g),this.downRightAnimation=g;const m=new s.AnimatedSprite(o);this.spritesContainer.addChild(m),this.downAnimation=m;const w=new s.AnimatedSprite(n);this.spritesContainer.addChild(w),this.downLeftAnimation=w;const x=new s.AnimatedSprite(a);this.spritesContainer.addChild(x),this.leftAnimation=x;const f=new s.AnimatedSprite(d);this.spritesContainer.addChild(f),this.upLeftAnimation=f,this.lifeBar=new h.LifeBar(this.drawLifeBarOptions),this.addChild(this.lifeBar),this.reloadBar=new l.ReloadBar(this.drawReloadBarOptions),this.addChild(this.reloadBar)}setSelected(t){this.selectedGraphics.alpha=t?.5:0,this.selected=t}getSelectionPosition({center:t=!1}={}){const e=this.drawSelectionOptions.strokeWidth,i={x:this.x+this.selectedGraphics.x+e,y:this.y+this.selectedGraphics.y+e};return t&&(i.x+=(this.selectedGraphics.width-2*e)/2,i.y+=(this.selectedGraphics.height-2*e)/2),i}getSelectionBounds(){const t=this.getSelectionPosition(),e=this.drawSelectionOptions.strokeWidth;return{top:t.y,right:t.x+this.selectedGraphics.width-2*e,bottom:t.y+this.selectedGraphics.height-2*e,left:t.x}}getGridXY({floor:t=!1,center:e=!1}={}){const{gridSize:i}=this.game.tileMap,s=this.getSelectionPosition({center:e}),r={gridX:s.x/i,gridY:s.y/i};return t&&(r.gridX=Math.floor(r.gridX),r.gridY=Math.floor(r.gridY)),r}setPositionByXY({x:t,y:e,center:i=!1}){const s=this.drawSelectionOptions.strokeWidth,r=0-(this.selectedGraphics.x+(i?this.selectedGraphics.width/2:s)),o=0-(this.selectedGraphics.y+(i?this.selectedGraphics.height/2:s));this.position.set(t+r,e+o)}setPositionByGridXY({gridX:t,gridY:e,center:i}){const{gridSize:s}=this.game.tileMap;this.setPositionByXY({x:t*s,y:e*s,center:i})}checkDrawVehicleBounds(){if(d.logVehicleBounds.enabled){const t=this.getSelectionBounds(),e=new s.Graphics;e.beginFill(16777215),e.alpha=.5,e.drawRect(t.left-this.x,t.top-this.y,t.right-t.left,t.bottom-t.top),e.endFill(),this.addChild(e)}}hideAllAnimations(){this.spritesContainer.children.forEach((t=>{t.visible=!1}))}updateAnimation(){this.switchAnimation(this.vector.direction)}switchAnimation(t){let e;const i=.5;e=t>=r.EVectorDirection.upLeft+i&&t<=r.EVectorDirection.upLeft+1||t>=r.EVectorDirection.up&&t<=r.EVectorDirection.upRight-i?this.upAnimation:t>=r.EVectorDirection.upRight+i&&t<=r.EVectorDirection.downRight-i?this.rightAnimation:t>=r.EVectorDirection.downRight+i&&t<=r.EVectorDirection.downLeft-i?this.downAnimation:t>=r.EVectorDirection.downLeft+i&&t<=r.EVectorDirection.upLeft-i?this.leftAnimation:t>r.EVectorDirection.up&&t<r.EVectorDirection.right?this.upRightAnimation:t>r.EVectorDirection.right&&t<r.EVectorDirection.down?this.downRightAnimation:t>=r.EVectorDirection.down&&t<r.EVectorDirection.left?this.downLeftAnimation:this.upLeftAnimation,e!==this.currentAnimation&&(this.currentAnimation=e,this.hideAllAnimations(),this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0)}drawSelection(){const{offset:t,strokeWidth:e,strokeColor:i,strokeSecondColor:r,radius:o}=this.drawSelectionOptions;this.selectedGraphics.position.set(t.x,t.y);const n=new s.Graphics;this.selectedGraphics.addChild(n);const a=2*Math.PI/8,h=o+e,d=o+e;for(let t=0;t<8;t++){n.beginFill(t%2==0?i:r);const s=a*t,l=a*(t+1),c=o+e;n.moveTo(h+o*Math.cos(s),d+o*Math.sin(s)),n.lineTo(h+c*Math.cos(s),d+c*Math.sin(s)),n.arc(h,d,c,s,l),n.lineTo(h+o*Math.cos(l),d+o*Math.sin(l)),n.arc(h,d,o,l,s,!0),n.endFill()}this.selectedGraphics.alpha=0}drawLifeBar(){this.lifeBar.draw(this.drawLifeBarOptions);const{offset:t}=this.drawLifeBarOptions;this.lifeBar.position.set(t.x,t.y)}updateLife(){this.lifeBar.updateLife(this.life/this.hitPoints)}isAlive(){return this.life>0}isHealthy(){return this.life>=.4*this.hitPoints}isDead(){return!this.isAlive()}subLife(t){this.life-=t,this.life<=0?this.removeAndDestroy():this.updateLife()}isValidTarget(t){return t.team!==this.team&&(this.canAttackLand&&(t.type===n.EItemType.buildings||t.type===n.EItemType.vehicles)||this.canAttackAir&&t.type===n.EItemType.aircraft)}findTargetInSight(t=0){const e=this.getGridXY({center:!0}),i={},s=this.game.tileMap.activeItems.children;for(let r=s.length-1;r>=0;r--){const o=s[r];if(this.isValidTarget(o)){const s=o.getGridXY({center:!0}),r=Math.pow(s.gridX-e.gridX,2)+Math.pow(s.gridY-e.gridY,2);r<Math.pow(this.sight+t,2)&&(Array.isArray(i[r])||(i[r]=[]),i[r].push(o))}}return Object.keys(i).map(Number).sort(((t,e)=>t-e)).map((t=>i[t])).flat()[0]}processOrders(){const{tileMap:t,turnSpeedAdjustmentFactor:e}=this.game,i=this.getGridXY({center:!0});switch(this.orders.type){case"move":{this.collisionCount=0;const e=Math.pow(this.orders.toPoint.gridX-i.gridX,2)+Math.pow(this.orders.toPoint.gridY-i.gridY,2);if(e<Math.pow(this.radius/t.gridSize,2))return void(this.orders={type:"stand"});if(this.colliding&&e<Math.pow(3*this.radius/t.gridSize,2))return void(this.orders={type:"stand"});{if(this.colliding&&e<Math.pow(5*this.radius/t.gridSize,2)&&(0===this.collisionCount?this.collisionCount=1:this.collisionCount++,this.collisionCount>30))return void(this.orders={type:"stand"});const i=Math.pow(e,.5);if(!this._moveTo(this.orders.toPoint,i))return void(this.orders={type:"stand"})}break}case"stand":{const t=this.findTargetInSight();null!=t&&(this.orders={type:"attack",to:t});break}case"sentry":{const t=this.findTargetInSight(2);null!=t&&(this.orders={type:"attack",to:t,nextOrder:this.orders});break}case"hunt":{const t=this.findTargetInSight(100);null!=t&&(this.orders={type:"attack",to:t,nextOrder:this.orders});break}case"attack":{if(null==this.orders.to)return;if(this.orders.to.isDead()||!this.isValidTarget(this.orders.to))return void(null!=this.orders.nextOrder?this.orders=this.orders.nextOrder:this.orders={type:"stand"});const s=this.orders.to.getGridXY({center:!0}),r=Math.pow(s.gridX-i.gridX,2)+Math.pow(s.gridY-i.gridY,2);if(r<Math.pow(this.sight,2)){const r=(0,o.findAngleGrid)({from:s,to:i,directions:this.vector.directions}),n=(0,o.angleDiff)({angle1:this.vector.direction,angle2:r,directions:this.vector.directions}),a=this.turnSpeed*e;if(Math.abs(n)>a)this.vector.setDirection({direction:(0,o.wrapDirection)({direction:this.vector.direction+a*Math.abs(n)/n,directions:this.vector.directions})}),this.moveTurning=!0;else if(this.vector.setDirection({direction:r}),this.moveTurning=!1,this.reloadTimeLeft<=0){this.reloadTimeLeft=this.Projectile.reloadTime;const e=-Math.round(this.vector.direction)/this.vector.directions*2*Math.PI,s=i.gridX-this.radius*Math.sin(e)/t.gridSize,o=i.gridY-this.radius*Math.cos(e)/t.gridSize,n=new this.Projectile({game:this.game,initX:s*t.gridSize,initY:o*t.gridSize,direction:r,target:this.orders.to});t.addItem(n)}}else{const t=Math.pow(r,.5);if(!this._moveTo({type:this.orders.to.type,...s},t))return void(this.orders={type:"stand"})}break}case"patrol":{const e=this.findTargetInSight(1);if(null!=e)return void(this.orders={type:"attack",to:e,nextOrder:this.orders});const s=Math.pow(this.orders.toPoint.gridX-i.gridX,2)+Math.pow(this.orders.toPoint.gridY-i.gridY,2);if(s<Math.pow(this.sight/t.gridSize,2)){const t=this.orders.toPoint;this.orders.toPoint=this.orders.fromPoint,this.orders.fromPoint=t}else this._moveTo(this.orders.toPoint,s);break}case"guard":{if(this.orders.to.isDead())return void(null!=this.orders.nextOrder?this.orders=this.orders.nextOrder:this.orders={type:"stand"});const t=this.orders.to.getGridXY({center:!0}),e=Math.pow(t.gridX-i.gridX,2)+Math.pow(t.gridY-i.gridY,2);if(e<Math.pow(this.sight-1,2)){const t=this.findTargetInSight(1);if(null!=t)return void(this.orders={type:"attack",to:t,nextOrder:this.orders});const e=this.orders.to.findTargetInSight(1);if(null!=e)return void(this.orders={type:"attack",to:e,nextOrder:this.orders})}else{const t=this.findTargetInSight(1);if(null!=t)this.orders={type:"attack",to:t,nextOrder:this.orders};else{const t=this.orders.to.getGridXY({center:!0});this._moveTo({type:this.orders.to.type,...t},e)}}}}this.updateAnimation()}handleUpdate(t){this.reloadTimeLeft>0&&(this.reloadTimeLeft-=this.game.reloadAdjustmentFactor),this.processOrders(),this.updateReload(),this.zIndex=this.y+this.height}checkCollisionObjects(t,e){const{tileMap:i,speedAdjustmentFactor:s,speedAdjustmentWhileTurningFactor:r}=this.game,o=this.getGridXY({center:!0}),n=this.speed*s*(this.moveTurning?r:1),a=Math.min(n,e),h=-Math.round(this.vector.direction)/this.vector.directions*2*Math.PI,d=o.gridX-a*Math.sin(h),l=o.gridY-a*Math.cos(h),u=[],p=Math.max(0,Math.round(d)-3),g=Math.min(i.mapGridWidth-1,Math.round(d)+3),m=Math.max(0,Math.round(l)-3),w=Math.min(i.mapGridHeight-1,Math.round(l)+3);for(let e=p;e<=g;e++)for(let s=m;s<=w;s++)if(1===t[s][e]){const t=e+.5,r=s+.5,o=Math.pow(t-d,2)+Math.pow(r-l,2);o<Math.pow(this.radius/i.gridSize,2)?u.push({collisionType:c.hard,with:{type:"wall",x:t,y:r}}):o<Math.pow(1.1*this.radius/i.gridSize,2)&&u.push({collisionType:c.soft,with:{type:"wall",x:t,y:r}})}const{moveableItems:x}=i;for(let t=x.length-1;t>=0;t--){const e=x[t],s=e.getGridXY({center:!0});if(e!==this&&Math.abs(s.gridX-o.gridX)<3&&Math.abs(s.gridY-o.gridY)<3){const t=Math.pow(s.gridX-d,2)+Math.pow(s.gridY-l,2);t<Math.pow((this.radius+e.radius)/i.gridSize,2)?u.push({collisionType:c.hard,with:{type:e.type,x:s.gridX,y:s.gridY}}):t<Math.pow((1.1*this.radius+e.radius)/i.gridSize,2)&&u.push({collisionType:c.soft,with:{type:e.type,x:s.gridX,y:s.gridY}})}}return u}_moveTo(t,e){const{tileMap:i,turnSpeedAdjustmentFactor:s,speedAdjustmentFactor:r,speedAdjustmentWhileTurningFactor:h}=this.game,d=this.getGridXY({center:!0}),l=Math.round(t.gridX),u=Math.round(t.gridY),p={gridX:Math.round(d.gridX),gridY:Math.round(d.gridY)},g={gridX:l,gridY:u},m=i.currentCopyMapPassableGrid;let w;t.type!==n.EItemType.buildings&&t.type!==n.EItemType.terrain||(m[u][l]=0);let x=[];if(p.gridY<0||p.gridY>=i.mapGridHeight||p.gridX<0||p.gridX>=i.mapGridWidth||p.gridX===g.gridX&&p.gridY===g.gridY)x=[{x:d.gridX,y:d.gridY},{x:t.gridX,y:t.gridY}],w=(0,o.findAngleGrid)({from:t,to:d,directions:this.vector.directions});else{if(x=a.AStar.calc({grid:m,start:p,end:g,f:"Euclidean"}),!(x.length>1))return!1;{const t={x:x[1].x,y:x[1].y};w=(0,o.findAngle)({from:t,to:{x:d.gridX,y:d.gridY},directions:this.vector.directions})}}const f=this.checkCollisionObjects(m,e);if(this.colliding=!1,this.hardCollision=!1,f.length>0){this.colliding=!0;const t={x:0,y:0};f.push({collisionType:c.attraction,with:{x:x[1].x+.5,y:x[1].y+.5}});for(let e=f.length-1;e>=0;e--){const i=f[e],s=-(0,o.findAngle)({from:i.with,to:{x:d.gridX,y:d.gridY},directions:this.vector.directions})/this.vector.directions*2*Math.PI;let r;switch(i.collisionType){case c.hard:r=2,this.hardCollision=!0;break;case c.soft:r=1;break;case c.attraction:r=-.5}t.x+=r*Math.sin(s),t.y+=r*Math.cos(s)}w=(0,o.findAngle)({from:t,to:{x:0,y:0},directions:this.vector.directions})}else this.colliding=!1;const y=(0,o.angleDiff)({angle1:this.vector.direction,angle2:w,directions:this.vector.directions}),b=this.turnSpeed*s;Math.abs(y)>10*b?(this.vector.setDirection({direction:(0,o.wrapDirection)({direction:this.vector.direction+b*Math.abs(y)/y,directions:this.vector.directions})}),this.moveTurning=!0):(this.vector.setDirection({direction:w}),this.moveTurning=!1);const v=this.speed*r*(this.moveTurning?h:1);let T=Math.min(v,e);this.hardCollision&&(T=0);const C=-Math.round(this.vector.direction)/this.vector.directions*2*Math.PI,S=-T*Math.sin(C),M=-T*Math.cos(C),k=d.gridX+S,A=d.gridY+M;return this.setPositionByGridXY({gridX:k,gridY:A,center:!0}),!0}removeAndDestroy(){this.game.deselectItem(this),this.removeFromParent()}drawReloadBar(){this.reloadBar.draw(this.drawReloadBarOptions);const{offset:t}=this.drawReloadBarOptions;this.reloadBar.position.set(t.x,t.y)}updateReload(){const{reloadTime:t}=this.Projectile;this.reloadBar.updateReload((t-this.reloadTimeLeft)/t)}}e.Vehicle=u},6844:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-0.mp3"},6851:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-1.mp3"},8602:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-2.mp3"},2980:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-3.mp3"},2704:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-4.mp3"},9376:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet-hit-5.mp3"},8178:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet1.mp3"},3209:(t,e,i)=>{t.exports=i.p+"./assets/audio/bullet2.mp3"},1040:(t,e,i)=>{t.exports=i.p+"./assets/audio/cannon-hit.mp3"},7822:(t,e,i)=>{t.exports=i.p+"./assets/audio/cannon1.mp3"},9748:(t,e,i)=>{t.exports=i.p+"./assets/audio/cannon2.mp3"},5286:(t,e,i)=>{t.exports=i.p+"./assets/audio/click.mp3"},2044:(t,e,i)=>{t.exports=i.p+"./assets/audio/engaging.mp3"},2254:(t,e,i)=>{t.exports=i.p+"./assets/audio/gun.mp3"},7574:(t,e,i)=>{t.exports=i.p+"./assets/audio/heatseeker1.mp3"},3987:(t,e,i)=>{t.exports=i.p+"./assets/audio/heatseeker2.mp3"},2763:(t,e,i)=>{t.exports=i.p+"./assets/audio/laser1.mp3"},7976:(t,e,i)=>{t.exports=i.p+"./assets/audio/laser2.mp3"},3534:(t,e,i)=>{t.exports=i.p+"./assets/audio/message.mp3"},9345:(t,e,i)=>{t.exports=i.p+"./assets/audio/roger1.mp3"},9275:(t,e,i)=>{t.exports=i.p+"./assets/audio/roger2.mp3"},4844:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-attack-0.mp3"},5563:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-attack-1.mp3"},4389:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-attack-2.mp3"},3481:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-yes-0.mp3"},6349:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-yes-1.mp3"},3722:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-yes-2.mp3"},2923:(t,e,i)=>{t.exports=i.p+"./assets/audio/tank-yes-3.mp3"},6955:(t,e,i)=>{t.exports=i.p+"./assets/audio/vulture-attack-0.mp3"},978:(t,e,i)=>{t.exports=i.p+"./assets/audio/vulture-yes-0.mp3"},6707:(t,e,i)=>{t.exports=i.p+"./assets/audio/vulture-yes-1.mp3"},5061:(t,e,i)=>{t.exports=i.p+"./assets/audio/vulture-yes-2.mp3"},5367:(t,e,i)=>{t.exports=i.p+"./assets/audio/vulture-yes-3.mp3"},651:(t,e,i)=>{t.exports=i.p+"./assets/audio/yup.mp3"}},i={};function s(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,t=[],s.O=(e,i,r,o)=>{if(!i){var n=1/0;for(l=0;l<t.length;l++){for(var[i,r,o]=t[l],a=!0,h=0;h<i.length;h++)(!1&o||n>=o)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(a=!1,o<n&&(n=o));if(a){t.splice(l--,1);var d=r();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[i,r,o]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{var t={179:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var r,o,[n,a,h]=i,d=0;if(n.some((e=>0!==t[e]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(h)var l=h(s)}for(e&&e(i);d<n.length;d++)o=n[d],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(l)},i=self.webpackChunksimple_html5_rts_game=self.webpackChunksimple_html5_rts_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=s.O(void 0,[736],(()=>s(6752)));r=s.O(r)})();